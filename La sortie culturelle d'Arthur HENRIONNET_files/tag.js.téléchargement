/*! For license information please see tag.js.LICENSE.txt */
(()=>{"use strict";var e={176:(e,t,n)=>{function i(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function s(e,t){return e.require(t)}n.d(t,{l$:()=>s,KV:()=>i}),e=n.hmd(e)},170:(e,t,n)=>{n.d(t,{ph:()=>c,yW:()=>l});var i=n(176),s=n(235);e=n.hmd(e);const o=(0,s.Rf)(),r={nowSeconds:()=>Date.now()/1e3};const a=(0,i.KV)()?function(){try{return(0,i.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=o;if(!e||!e.now)return;return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),d=void 0===a?r:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},l=r.nowSeconds.bind(r),c=d.nowSeconds.bind(d);let h;(()=>{const{performance:e}=o;if(!e||!e.now)return void(h="none");const t=36e5,n=e.now(),i=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,r=s<t,a=e.timing&&e.timing.navigationStart,d="number"==typeof a?Math.abs(a+n-i):t;r||d<t?s<=d?(h="timeOrigin",e.timeOrigin):h="navigationStart":h="dateNow"})()},235:(e,t,n)=>{function i(e){return e&&e.Math==Math?e:void 0}n.d(t,{Rf:()=>o,YO:()=>r,n2:()=>s});const s="object"==typeof globalThis&&i(globalThis)||"object"==typeof window&&i(window)||"object"==typeof self&&i(self)||"object"==typeof n.g&&i(n.g)||function(){return this}()||{};function o(){return s}function r(e,t,n){const i=n||s,o=i.__SENTRY__=i.__SENTRY__||{};return o[e]||(o[e]=t())}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i](o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FunctionToString:()=>tn,InboundFilters:()=>sn});var t,i,s,o,r,a={};n.r(a),n.d(a,{Breadcrumbs:()=>Kt,Dedupe:()=>yn,GlobalHandlers:()=>rn,HttpContext:()=>Rn,LinkedErrors:()=>fn,TryCatch:()=>un}),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.REQUEST_FAILED="REQUEST_FAILED",e.MRAID_REQUEST_FAILED="MRAID_REQUEST_FAILED",e.CREATIVE_REQUEST_FAILED="CREATIVE_REQUEST_FAILED",e.REQUEST_ABORT="REQUEST_ABORT",e.CONSENT_DENIED="CONSENT_DENIED",e.EMPTY_PING="EMPTY_PING",e.TC_DATA_LISTENER_NOT_SUCCESS="TC_DATA_LISTENER_NOT_SUCCESS",e.EMPTY_TC_STRING="EMPTY_TC_STRING",e.TCFAPI_NOT_AVAILABLE="TCFAPI_NOT_AVAILABLE",e.EMPTY_AD_RESPONSE="EMPTY_AD_RESPONSE",e.MALFORMED_AD_RESPONSE="MALFORMED_AD_RESPONSE",e.MISSING_AD_UNIT_CONFIG_ERROR="MISSING_AD_UNIT_CONFIG_ERROR",e.MALFORMED_FIELD_ERROR="MALFORMED_FIELD_ERROR",e.MISSING_FIELD_ERROR="MISSING_FIELD_ERROR",e.OVERFLOW_FIELD_ERROR="OVERFLOW_FIELD_ERROR",e.PARAMS_TYPE_ERROR="PARAMS_TYPE_ERROR",e.EMPTY_AD_UNITS="EMPTY_AD_UNITS",e.UNSUPPORTED_BROWSER="UNSUPPORTED_BROWSER",e.UNSUPPORTED_BROWSER_VERSION="UNSUPPORTED_BROWSER_VERSION",e.UNSUPPORTED_OS="UNSUPPORTED_OS",e.IMAGE_NOT_FOUND="IMAGE_NOT_FOUND",e.VIDEO_NOT_FOUND="VIDEO_NOT_FOUND",e.BOT_USER="BOT_USER",e.FRAME_NOT_READY="FRAME_NOT_READY",e.WEB_USER_ID_UNDEFINED="WEB_USER_ID_UNDEFINED",e.UNLOAD_ERROR="UNLOAD_ERROR",e.UNLOAD_FRAME_ERROR="UNLOAD_FRAME_ERROR",e.UNKNOWN_HEADER_SELECTOR="UNKNOWN_HEADER_SELECTOR",e.PREBID_BID_OBJECT_NOT_FOUND="PREBID_BID_OBJECT_NOT_FOUND",e.AMAZON_TAM_OBJECT_NOT_FOUND="OG_AMAZON_TAM_NOT_FOUND",e.SHOWCASE_OBJECT_NOT_FOUND="SHOWCASE_OBJECT_NOT_FOUND",e.PREBID_PBJS_API_NOT_FOUND_ERROR="PREBID_PBJS_API_NOT_FOUND_ERROR",e.PREBID_AD_UNIT_CONFIG_ERROR="PREBID_AD_UNIT_CONFIG_ERROR",e.HEAVY_AD_INTERVENTION="HEAVY_AD_INTERVENTION",e.PREBID_OG_BID_OBJECT_EXT_CONFIG_ERROR="PREBID_OG_BID_OBJECT_EXT_CONFIG_ERROR",e.PREBID_NO_CONFIG_AVAILABLE_ON_LOAD_EVENT_ERROR="PREBID_NO_CONFIG_AVAILABLE_ON_LOAD_EVENT_ERROR",e.PREBID_PBJS_API_NO_BID_RESPONSE_FOUND_ERROR="PREBID_PBJS_API_NO_BID_RESPONSE_FOUND_ERROR",e.CONCURRENT_SCRIPT_LOADED_ERROR="CONCURRENT_SCRIPT_LOADED_ERROR",e.ELEMENT_IS_OVER_CONTAINER="ELEMENT_IS_OVER_CONTAINER",e.RUNTIME_ERROR="RUNTIME_ERROR",e.AD_SLOT_ANCESTOR="AD_SLOT_ANCESTOR",e.AD_SLOT_DESCENDANT="AD_SLOT_DESCENDANT",e.AD_SLOT_SELECTOR_NOT_FOUND="AD_SLOT_SELECTOR_NOT_FOUND",e.WINDOW_ACCESS_ERROR="WINDOW_ACCESS_ERROR"}(t||(t={})),function(e){e.SCRIPT_LOADED="SCRIPT_LOADED",e.ENV_SUPPORTED="ENV_SUPPORTED",e.NO_FILL="NO_FILL",e.CONSENT_ACCEPT="CONSENT_ACCEPT",e.CONSENT_DENIED="CONSENT_DENIED",e.CONSENT_NOT_APPLICABLE="CONSENT_NOT_APPLICABLE",e.PROFIG_SUCCESS="PROFIG_SUCCESS",e.AD_UNIT_CONFIG_VALID="AD_UNIT_CONFIG_VALID",e.FILL="FILL",e.AD_DISPLAYED="AD_DISPLAYED",e.BEFORE_UNLOAD="BEFORE_UNLOAD",e.VISIBILITY_CHANGE_HIDDEN="VISIBILITY_CHANGE_HIDDEN",e.PAGE_HIDE="PAGE_HIDE",e.GET_GDPR_APPLIES_SUCCESS="GET_GDPR_APPLIES_SUCCESS",e.GET_GDPR_APPLIES_FAILED="GET_GDPR_APPLIES_FAILED",e.HEADER_DISPLAY_CUSTOM_CLOSE_CROSS_ON_CLICK="HEADER_DISPLAY_CUSTOM_CLOSE_CROSS_ON_CLICK",e.ABORT_TAG_EXECUTION="ABORT_TAG_EXECUTION",e.AD_CLICK="AD_CLICK",e.VISIBILITY_CHANGE_VISIBLE="VISIBILITY_CHANGE_VISIBLE"}(i||(i={})),function(e){e.NOT_RESPONSIVE="NOT_RESPONSIVE",e.AUTOPLAY_FAILURE="AUTOPLAY_FAILURE",e.ELEMENT_HAS_NO_SPACE="ELEMENT_HAS_NO_SPACE",e.UNSPECIFIED_HEADER_SELECTOR="UNSPECIFIED_HEADER_SELECTOR",e.HEADER_SELECTOR_NOT_FOUND="HEADER_SELECTOR_NOT_FOUND",e.AD_SLOT_SELECTOR_NOT_FOUND="AD_SLOT_SELECTOR_NOT_FOUND",e.OVERLAPPING_ERROR="OVERLAPPING_ERROR",e.SMART_BANNER_IOS="SMART_BANNER_IOS",e.SCROLL_CONTENT_SELECTOR_NOT_FOUND="SCROLL_CONTENT_SELECTOR_NOT_FOUND"}(s||(s={})),function(e){e.CONSENT_DENIED="CONSENT_DENIED",e.COOKIE_SYNCING_ERROR="COOKIE_SYNCING_ERROR",e.AD_REQUEST_ERROR="AD_REQUEST_ERROR",e.PROFIG_REQUEST_ERROR="PROFIG_REQUEST_ERROR",e.GDPR_APPLIES_RESPONSE_ERROR="GDPR_APPLIES_RESPONSE_ERROR",e.PROFIG_RESPONSE_ERROR="PROFIG_RESPONSE_ERROR",e.AD_RESPONSE_ERROR="AD_RESPONSE_ERROR",e.E_LOAD_TRACK_ERROR="E_LOAD_TRACK_ERROR",e.SHOWN_TRACK_ERROR="SHOWN_TRACK_ERROR",e.WSBACK_TRACK_ERROR="WSBACK_TRACK_ERROR",e.RENDERING_ERROR="RENDERING_ERROR",e.AD_UNIT_CONFIG_ERROR="AD_UNIT_CONFIG_ERROR",e.AD_UNIT_PREBID_CONFIG_ERROR="AD_UNIT_PREBID_CONFIG_ERROR",e.ENVIRONMENT_ERROR="ENVIRONMENT_ERROR",e.CALLBACK_ERROR="CALLBACK_ERROR",e.UNKNOWN="UNKNOWN",e.CLICK_URL_MACRO_ERROR="CLICK_URL_MACRO_ERROR",e.PREBID_BID_OBJECT_ERROR="PREBID_BID_OBJECT_ERROR",e.HEADER_BIDDING_BID_OBJECT_ERROR="HEADER_BIDDING_BID_OBJECT_ERROR",e.AMAZON_TAM_OBJECT_ERROR="AMAZON_TAM_OBJECT_ERROR",e.SHOWCASE_OBJECT_ERROR="SHOWCASE_OBJECT_ERROR",e.PREBID_API_ERROR="PREBID_API_ERROR",e.CONTEXT_ERROR="CONTEXT_ERROR",e.AD_SLOT_NOT_IN_VIEWPORT="AD_SLOT_NOT_IN_VIEWPORT",e.REMOTE_CUSTOM_CODE_ERROR="REMOTE_CUSTOM_CODE_ERROR",e.PASSBACK_ERROR="PASSBACK_ERROR"}(o||(o={}));var d=new Uint8Array(16);function l(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(d)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const h=function(e){return"string"==typeof e&&c.test(e)};for(var _=[],u=0;u<256;++u)_.push((u+256).toString(16).substr(1));const p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_[e[t+0]]+_[e[t+1]]+_[e[t+2]]+_[e[t+3]]+"-"+_[e[t+4]]+_[e[t+5]]+"-"+_[e[t+6]]+_[e[t+7]]+"-"+_[e[t+8]]+_[e[t+9]]+"-"+_[e[t+10]]+_[e[t+11]]+_[e[t+12]]+_[e[t+13]]+_[e[t+14]]+_[e[t+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n};const E=function(e,t,n){var i=(e=e||{}).random||(e.rng||l)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=i[s];return t}return p(i)};var m,g,f;!function(e){e.GAM="GAM",e.DIRECT="DIRECT",e.HEADER_BIDDING="HEADER_BIDDING",e.UNKNOWN="UNKNOWN"}(m||(m={})),function(e){e.UNKNOWN_ERROR_DESCRIPTION="Unknown error",e.REQUEST_FAILED_DESCRIPTION="Request has failed",e.REQUEST_ABORT_DESCRIPTION="Request is aborted",e.CONSENT_DENIED="Minimal TC String conditions are not met for ad delivery",e.EMPTY_PING_DESCRIPTION="pingReturn from __tcfapi is empty",e.TC_DATA_LISTENER_NOT_SUCCESS_DESCRIPTION="addEventListener from __tcfapi has not succeeded",e.EMPTY_TC_STRING_DESCRIPTION="the received tcString from __tcfapi is empty",e.TCFAPI_NOT_AVAILABLE_DESCRIPTION="the __tcfapi is not available on the current page",e.EMPTY_AD_RESPONSE_DESCRIPTION="ms-bidder returned an empty ad response",e.MALFORMED_AD_RESPONSE_DESCRIPTION="ms-bidder returned a malformed ad response",e.MALFORMED_AD_RESPONSE_SIZE_DESCRIPTION="ms-bidder returned a malformed size in ad response",e.MALFORMED_FIELD_ERROR_DESCRIPTION="Error in placement configuration: field does not respect documentation specifications",e.MISSING_AD_UNIT_CONFIG_ERROR_DESCRIPTION="Ad Unit Config is not defined",e.MISSING_FIELD_ERROR_DESCRIPTION="Error in placement configuration: one mandatory field is missing",e.OVERFLOW_FIELD_ERROR_DESCRIPTION="Error in placement configuration: one field length is over the allowed 255 limit",e.PARAMS_TYPE_ERROR_DESCRIPTION="Error in placement configuration: expected number in field and received other type",e.EMPTY_AD_UNITS_DESCRIPTION="OG_ad_units is empty or undefined",e.IMAGE_NOT_FOUND_DESCRIPTION="ad image/display is not found even after 10 seconds",e.VIDEO_NOT_FOUND_DESCRIPTION="ad video is not found even after 10 seconds",e.BOT_USER_DESCRIPTION="user is a known bot",e.FRAME_NOT_READY_DESCRIPTION="ad iframe was not ready even after 10 seconds",e.WEB_USER_ID_UNDEFINED_DESCRIPTION="profig output does not contain web user id",e.PREBID_BID_OBJECT_NOT_FOUND="OG_PREBID_BID_OBJECT has not been found on window context",e.AMAZON_TAM_OBJECT_NOT_FOUND="OG_AMAZON_TAM has not been found on window context",e.SHOWCASE_OBJECT_NOT_FOUND="OG_SHOWCASE has not been found on window context",e.PREBID_PBJS_GETBIDRESPONSES_NOT_FOUND="pbjs getbidresponses method not found",e.PREBID_AD_UNIT_CONFIG_DESCRIPTION="Ad Unit Config is not defined",e.UNLOAD_ERROR_DESCRIPTION="unload error from format",e.UNLOAD_FRAME_ERROR_DESCRIPTION="unload error from google frame",e.PREBID_OG_BID_OBJECT_EXT_CONFIG_DESCRIPTION="ogbidobject ext property not found",e.PREBID_NO_CONFIG_AVAILABLE_ON_LOAD_EVENT_DESCRIPTION="player dont find config after load listener has been fired",e.PREBID_PBJS_API_NO_BID_RESPONSE_FOUND_DESCRIPTION="ogury bid response not found in pbjs object",e.CONCURRENT_SCRIPT_LOADED_DESCRIPTION="another instance of Ogury script is already running",e.ELEMENT_IS_OVER_CONTAINER_DESCRIPTION="another element has been detected over our container",e.NO_SPACE_AVAILABLE_DESCRIPTION="no space available to display header ad in the dom",e.RUNTIME_ERROR_DESCRIPTION="custom script contains error at runtime",e.AD_SLOT_ANCESTOR_DESCRIPTION="ad slot element is an ancestor of the header",e.AD_SLOT_DESCENDANT_DESCRIPTION="ad slot element is an descendant of the header",e.AD_SLOT_SELECTOR_NOT_FOUND_DESCRIPTION="the ad slot selector does not exist in the dom",e.WINDOW_ACCESS_ERROR_DESCRIPTION="cannot access window top"}(g||(g={}));class S extends Error{constructor(e,t,n,i){super(`${n||""}${i?JSON.stringify(i):""}`),this.errorType=e,this.errorEvent=t,this.name="TagError",this.date=new Date}}!function(e){e[e.DEBUG=3]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=0]="ERROR"}(f||(f={}));class R{static getLogLevel(){const e=O.getQueryParam(location.href,"ogy_log")||"";return f[e.toUpperCase()]||f.ERROR}static getOguryLog(){return"%c OGURY "}static bgOguryLog(){return"background:#ed6b79;color:#ffffff;font-weight:bold;border-radius:3px;"}static getAdTypeLog(){var e;const t=null===(e=window.OG_CONTEXT)||void 0===e?void 0:e.og_response_ad_unit_type;return t?`%c ${t} `:"%c"}static bgAdTypeLog(){return"background:#69A6F0;color:#ffffff;font-weight:bold;border-radius:3px;padding:1px;margin-left:1px;margin-left:1px;padding-left:3px;padding-right:3px"}static getFuncLog(e){return e.split("-").length>1?"%c "+e.split("-")[0]+"->":"%c "}static bgFuncLog(e){return e.split("-").length>1?"color:#000;font-weight:bold":void 0}static getMsgLog(e){return e.split("-").length>1?"%c"+e.split("-")[1]:"%c"+e.split("-")[0]}static bgMsgLog(e){return e.split("-").length>1?"background:#ffffff; color: #000000":void 0}static debug(e,t=""){R.getLogLevel()>=f.DEBUG&&console.log(R.getOguryLog()+R.getAdTypeLog()+R.getFuncLog(e)+R.getMsgLog(e),R.bgOguryLog(),R.bgAdTypeLog(),R.bgFuncLog(e)||"",R.bgMsgLog(e)||"",t)}static info(e,t=""){R.getLogLevel()>=f.INFO&&console.log(R.getOguryLog()+R.getAdTypeLog()+"%c "+e,R.bgOguryLog(),R.bgAdTypeLog(),"background:#ffffff; color: #00F",t)}static warning(e,t=""){R.getLogLevel()>=f.WARNING&&console.warn(R.getOguryLog()+R.getAdTypeLog()+"%c "+e,R.bgOguryLog(),R.bgAdTypeLog(),"",t)}static error(e,t=""){R.getLogLevel()>=f.ERROR&&console.error(R.getOguryLog()+R.getAdTypeLog()+"%c "+e,R.bgOguryLog(),R.bgAdTypeLog(),"",t)}static exception(e,t){e instanceof S?console.error(R.getOguryLog()+R.getAdTypeLog()+" %c \n%cError Type: %c"+e.errorType+"\n%cDate: %c"+e.date.toString()+"\n%cException : %c "+e,R.bgOguryLog(),R.bgAdTypeLog(),"","font-weight:bold;","","font-weight:bold;","","font-weight:bold;",""):console.error(R.getOguryLog()+R.getAdTypeLog()+" %c \n%cError Event: %c"+t+"\n%cException : %c"+e,R.bgOguryLog(),R.bgAdTypeLog(),"","font-weight:bold;","","font-weight:bold;","")}}const y=100;class O{static getDeliveryMode(){var e,t;return(null===(e=window.OG_CONTEXT)||void 0===e?void 0:e.delivery_mode)?window.OG_CONTEXT.delivery_mode:(null===(t=window.frameElement)||void 0===t?void 0:t.id.includes("google_ads_iframe"))?m.GAM:m.DIRECT}static isHeaderBiddingDeliveryMode(){return[m.HEADER_BIDDING].includes(this.getDeliveryMode())}static generateUUIDV4(){return E()}static isSafariBrowser(e){return/^((?!chrome|android|crios).)*safari/i.test(e.userAgent)}static isAndroidDevice(e){return/android/i.test(e.toLowerCase())}static isIosDevice(e){return/iphone|ipad|ipod/i.test(e.toLowerCase())}static getDeviceOS(){return this.isIosDevice(navigator.userAgent)?"ios":this.isAndroidDevice(navigator.userAgent)?"android":"unknown"}static waitFor(e,t,n){if(e())return t();let i=0;const s=setInterval((()=>{if(i+=50,e())return clearInterval(s),t();i>=n&&(clearInterval(s),t(new Error("timeout exceeded")))}),50);return s}static waitForEvent(e,t,n=1e3){const i=new Promise((n=>{const i=()=>{e.removeEventListener(t,i),n()};e.addEventListener(t,i,{passive:!0})})),s=new Promise((e=>setTimeout(e,n)));return Promise.race([i,s])}static getClientWidth(){const e=O.getWindow().document.documentElement.clientWidth?O.getWindow().document.documentElement.clientWidth:0,t=O.getWindow().innerWidth?O.getWindow().innerWidth:0,n=O.getWindow().outerWidth?O.getWindow().outerWidth:0,i=O.getWindow().screen.width?O.getWindow().screen.width:0;return e||t||n||i}static getClientHeight(){const e=O.getWindow().document.documentElement.clientHeight?O.getWindow().document.documentElement.clientHeight:0,t=O.getWindow().innerHeight?O.getWindow().innerHeight:0,n=O.getWindow().outerHeight?O.getWindow().outerHeight:0,i=O.getWindow().screen.height?O.getWindow().screen.height:0;return e||t||n||i}static getQueryParam(e,t){const n=null==e?void 0:e.match(new RegExp(".*[?&]"+t+"=([^&#]*)"));return n&&n[1]}static isHeaderAdSlotConfigParams(e){return Boolean(e&&"ad_slot_selector"in e&&e.ad_slot_selector)}static getMaxHeaderAdHeight(e){return Math.max(80,Math.min(y,isNaN(e)?y:e))}static serializeJSON(e){try{return JSON.stringify(e)}catch(e){R.error("Error on JSON Serialization")}}static getElementBottomPositionForIos(e,t){const n=new WebKitCSSMatrix(window.getComputedStyle(e).transform).m42,i=window.getComputedStyle(e);if("fixed"===i.position)return e.offsetTop+n+e.clientHeight;if("sticky"===i.position){return(Number.parseInt(i.top.replace(/\D/g,""),10)||0)+n+e.clientHeight}return e.offsetTop+n+e.clientHeight-t}static getElementBottomPosition(e,t){return O.isSafariBrowser(navigator)?O.getElementBottomPositionForIos(e,t):e.getBoundingClientRect().bottom}static getTimeSpentOnPage(){var e;if(null===(e=O.getWindow().document.timeline)||void 0===e?void 0:e.currentTime)return{timeSpentOnPage:O.getWindow().document.timeline.currentTime}}static getWindow(){if(window.OG_SHOWCASE)return window.self;try{return window.top.location.href&&window.top}catch(e){throw new S(t.WINDOW_ACCESS_ERROR,o.ENVIRONMENT_ERROR,g.WINDOW_ACCESS_ERROR_DESCRIPTION,{message:e instanceof Error?e.message:e})}}static isSmartBannerIOSPresent(){return!!this.getWindow().document.head.querySelector("[name=apple-itunes-app][content]")}}class C{static getArrayList(e){return e?e.split(","):[]}static get(e){try{return JSON.parse(e)}catch(t){return e}}}var v;!function(e){e.MOBILE_WEB_TAG_WWW="mobile-web-tag-www"}(v||(v={}));class T{constructor(){this.xmlHttpRequest=new XMLHttpRequest}send(e,t=!1){return new Promise((n=>{var i,s;this.xmlHttpRequest.open(e.method,e.url,!0),this.xmlHttpRequest.setRequestHeader("Content-Type","application/json"),Boolean(null===(i=e.httpData)||void 0===i?void 0:i.headers)&&Object.keys(e.httpData.headers).forEach((t=>{this.xmlHttpRequest.setRequestHeader(t,e.httpData.headers[t])})),this.xmlHttpRequest.timeout=3e3,this.xmlHttpRequest.withCredentials=t,this.xmlHttpRequest.onload=()=>n(this.xmlHttpRequest),this.xmlHttpRequest.onerror=()=>n(this.xmlHttpRequest),this.xmlHttpRequest.ontimeout=()=>n(Object.assign(Object.assign({},this.xmlHttpRequest),{status:408})),this.xmlHttpRequest.send(JSON.stringify(null===(s=e.httpData)||void 0===s?void 0:s.body))}))}}class N{static sendEvent(e,t){return(new T).send({url:C.get("https://ms-ads-monitoring-events.presage.io")+"/tag",method:"POST",httpData:{headers:{},body:Object.assign({},N.getEventField(e,t))}}).then((e=>200===e.status||204===e.status||(R.warning("event reporting error",e),!1)))}static getEventField(e,t){const{og_asset_key:n,delivery_mode:i,og_ad_session_id:s,og_response_campaign_id:o,og_response_media_type:r,og_advert_id:a,og_ad_unit:d,og_response_ad_unit_type:l,og_prebid_version:c,og_adapter_version:h,og_instance_tag_number:_,og_bidding_provider:u,og_auction_id:p}=window.OG_CONTEXT||{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({environment_type:"web",event:e,asset_key:n||"",tag_version:C.get("6.0.7"),location:location.href,device_screen_width:window.screen.width,device_screen_height:window.screen.height,locale:navigator.language,sent_at:Math.floor(Date.now()/1e3),source:v.MOBILE_WEB_TAG_WWW,delivery_mode:i||m.UNKNOWN,referrer:document.referrer},t),s&&{ad_session_id:s}),o&&{campaign_id:o}),r&&{media_type:r}),d&&{ad_unit_id:d}),l&&{ad_unit_type:l}),c&&{prebid_version:c}),h&&{adapter_version:h}),_&&{instance_tag_number:_}),u&&{bidding_provider:u}),p&&{auction_id:p}),a&&{advert_id:a})}}function A(){return function(e,n,i){const s=i.value;return i.value=function(...e){try{return s.apply(this,e)}catch(e){const n=o.CALLBACK_ERROR,i={error_type:t.UNKNOWN_ERROR,error_content:e instanceof Error?`${e.stack}`:`${e}`};N.sendEvent(n,i),R.exception(e,n)}},i}}var D,I=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class b{constructor(){this.cleanContextCallbacks=[]}static getInstance(){return b.instance||(b.instance=new b),b.instance}setAdUnit(e){this.adUnit=e}getAdUnit(){var e;return this.adUnit?this.adUnit:null===(e=O.getWindow().OG_ad_units)||void 0===e?void 0:e[0]}addHandlePassbackCallback(e){this.handlePassbackCallback=e}addCleanContextCallback(e){this.cleanContextCallbacks.push(e)}fireOnPositionChangeCallback(e,t){var n;(null===(n=e.callbacks)||void 0===n?void 0:n.on_position_change)&&(R.info("Firing on_position_change callback on position: "+t),e.callbacks.on_position_change(e,t))}fireOnAdShowCallback(e,t,n){var i;(null===(i=e.callbacks)||void 0===i?void 0:i.on_ad_show)&&(R.info("Firing on_ad_show callback on position: "+t),e.callbacks.on_ad_show(e,t,n))}fireOnNoAdCallback(e){var t,n;this.cleanContextCallbacks.forEach((e=>{e()})),(null===(t=e.callbacks)||void 0===t?void 0:t.on_no_ad)&&(R.info("Firing on_no_ad callback"),e.callbacks.on_no_ad(e)),e.passback&&1===(null===(n=window.OG_CONTEXT)||void 0===n?void 0:n.og_instance_tag_number)&&this.handlePassbackCallback()}fireOnAdCompleteCallback(e,t){var n;this.cleanContextCallbacks.forEach((e=>{e()})),(null===(n=e.callbacks)||void 0===n?void 0:n.on_ad_complete)&&(R.info("Firing on_ad_complete callback"),e.callbacks.on_ad_complete(e,t))}fireOnErrorCallback(e,n){var i,s,o,r;b.ON_ERROR_EVENTS.indexOf(e)>=0&&this.cleanContextCallbacks.forEach((e=>{e()})),(null==n?void 0:n.error_type)!==t.WINDOW_ACCESS_ERROR&&this.getAdUnit()&&b.ON_ERROR_EVENTS.indexOf(e)>=0&&(null===(s=null===(i=this.getAdUnit().callbacks)||void 0===i?void 0:i.on_error)||void 0===s||s.call(i,this.getAdUnit())),(null===(o=this.adUnit)||void 0===o?void 0:o.passback)&&1===(null===(r=window.OG_CONTEXT)||void 0===r?void 0:r.og_instance_tag_number)&&b.ON_ERROR_EVENTS_NO_PASSBACK.indexOf(e)<0&&this.handlePassbackCallback()}}b.ON_ERROR_EVENTS=[o.ENVIRONMENT_ERROR,o.CONSENT_DENIED,o.PROFIG_REQUEST_ERROR,o.PROFIG_RESPONSE_ERROR,o.AD_REQUEST_ERROR,o.AD_RESPONSE_ERROR,o.RENDERING_ERROR],b.ON_ERROR_EVENTS_NO_PASSBACK=[o.PASSBACK_ERROR,o.ENVIRONMENT_ERROR,o.CONSENT_DENIED,o.PROFIG_REQUEST_ERROR,o.PROFIG_RESPONSE_ERROR,o.CALLBACK_ERROR,o.COOKIE_SYNCING_ERROR,o.E_LOAD_TRACK_ERROR,o.SHOWN_TRACK_ERROR,o.WSBACK_TRACK_ERROR,o.AD_SLOT_NOT_IN_VIEWPORT,o.CLICK_URL_MACRO_ERROR,o.CONTEXT_ERROR,o.RENDERING_ERROR],I([A()],b.prototype,"fireOnPositionChangeCallback",null),I([A()],b.prototype,"fireOnAdShowCallback",null),I([A()],b.prototype,"fireOnNoAdCallback",null),I([A()],b.prototype,"fireOnAdCompleteCallback",null),I([A()],b.prototype,"fireOnErrorCallback",null),function(e){e.SHOWN="shown",e.LOADED="loaded",e.LOADED_ERROR="loaded_error"}(D||(D={}));class w{send(e){window.OG_CONTEXT.og_tracking_disabled||w.ALLOWED_TRACK_COUNT.get(e.body.content.event)<=0||(w.ALLOWED_TRACK_COUNT.set(e.body.content.event,w.ALLOWED_TRACK_COUNT.get(e.body.content.event)-1),(new T).send({url:"https://tr-v1.presage.io/v1/track",method:"POST",httpData:{headers:{"Device-OS":e.headers["Device-OS"],User:e.headers.User},body:e.body}}).then((n=>{200!==n.status&&L.handleEvent(this.getErrorEvent(e.body.content.event),{error_type:t.REQUEST_FAILED,error_content:g.REQUEST_FAILED_DESCRIPTION})})))}getErrorEvent(e){return e===D.LOADED?o.E_LOAD_TRACK_ERROR:o.SHOWN_TRACK_ERROR}static resetAllowedTrackCount(){w.ALLOWED_TRACK_COUNT=new Map([[D.LOADED.toString(),1],[D.SHOWN.toString(),1],[D.LOADED_ERROR.toString(),1]])}}function P(e,t,n){return{headers:{"Device-OS":O.getDeviceOS(),User:t.user_id},body:{connectivity:"WIFI",at:(new Date).toISOString(),build:1,version:C.get("6.0.7"),apps_publishers:[`${window.OG_CONTEXT.og_asset_key}`],content:{event:e,campaign:t.campaign_id,advertiser:t.advertiser_id,advert:t.advert_id,ad_unit_id:n}}}}w.ALLOWED_TRACK_COUNT=new Map([[D.LOADED.toString(),1],[D.SHOWN.toString(),1],[D.LOADED_ERROR.toString(),1]]);class L{static get bidderResponse(){return this._bidderResponse}static set bidderResponse(e){this._bidderResponse=e}static initAdSessionId(e){window.OG_CONTEXT||(window.OG_CONTEXT={});const t=e||O.generateUUIDV4();return window.OG_CONTEXT.og_ad_session_id=t,t}static postKeepAliveEvent(e,t){if(window.fetch){const n=N.getEventField(e,t);window.fetch(C.get("https://ms-ads-monitoring-events.presage.io")+"/tag",{method:"post",body:JSON.stringify(n),keepalive:!0,headers:{"Content-Type":"application/json"}})}else this.handleEvent(e,t)}static handleEvent(e,t,n=1){N.sendEvent(e,t).then((s=>{if(!s&&e===i.SCRIPT_LOADED&&n<3)return setTimeout((()=>this.handleEvent(i.SCRIPT_LOADED,t,n+1)),1e3*n)})),b.getInstance().fireOnErrorCallback(e,t),this.fireLoadedError(e,t)}static fireLoadedError(e,n){if(!this.bidderResponse||e!==o.RENDERING_ERROR||![t.VIDEO_NOT_FOUND,t.IMAGE_NOT_FOUND,t.UNLOAD_ERROR].includes(null==n?void 0:n.error_type))return;const i=P(D.LOADED_ERROR,this.bidderResponse,window.OG_CONTEXT.og_ad_unit);(new w).send(i)}}class F extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const x=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function U(e,t=!1){const{host:n,path:i,pass:s,port:o,projectId:r,protocol:a,publicKey:d}=e;return`${a}://${d}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${i?`${i}/`:i}${r}`}function k(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function M(e){const t="string"==typeof e?function(e){const t=x.exec(e);if(!t)throw new F(`Invalid Sentry Dsn: ${e}`);const[n,i,s="",o,r="",a]=t.slice(1);let d="",l=a;const c=l.split("/");if(c.length>1&&(d=c.slice(0,-1).join("/"),l=c.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return k({host:o,pass:s,path:d,projectId:l,port:r,protocol:n,publicKey:i})}(e):k(e);return function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:n,protocol:i}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new F(`Invalid Sentry Dsn: ${t} missing`)})),!n.match(/^\d+$/))throw new F(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(e){return"http"===e||"https"===e}(i))throw new F(`Invalid Sentry Dsn: Invalid protocol ${i}`);if(t&&isNaN(parseInt(t,10)))throw new F(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}var B=n(235);const H=["debug","info","warn","error","log","assert","trace"];function G(e){if(!("console"in B.n2))return e();const t=B.n2.console,n={};H.forEach((e=>{const i=t[e]&&t[e].__sentry_original__;e in t&&i&&(n[e]=t[e],t[e]=i)}));try{return e()}finally{Object.keys(n).forEach((e=>{t[e]=n[e]}))}}function W(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?H.forEach((n=>{t[n]=(...t)=>{e&&G((()=>{B.n2.console[n](`Sentry Logger [${n}]:`,...t)}))}})):H.forEach((e=>{t[e]=()=>{}})),t}let V;V="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,B.YO)("logger",W):W();const Y=Object.prototype.toString;function j(e){switch(Y.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ee(e,Error)}}function z(e,t){return Y.call(e)===`[object ${t}]`}function $(e){return z(e,"ErrorEvent")}function K(e){return z(e,"DOMError")}function q(e){return z(e,"String")}function X(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function J(e){return z(e,"Object")}function Q(e){return"undefined"!=typeof Event&&ee(e,Event)}function Z(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function ee(e,t){try{return e instanceof t}catch(e){return!1}}const te=(0,B.Rf)();function ne(e,t){try{let n=e;const i=5,s=80,o=[];let r=0,a=0;const d=" > ",l=d.length;let c;for(;n&&r++<i&&(c=ie(n,t),!("html"===c||r>1&&a+o.length*l+c.length>=s));)o.push(c),a+=c.length,n=n.parentNode;return o.reverse().join(d)}catch(e){return"<unknown>"}}function ie(e,t){const n=e,i=[];let s,o,r,a,d;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&q(s))for(o=s.split(/\s+/),d=0;d<o.length;d++)i.push(`.${o[d]}`);const c=["type","name","title","alt"];for(d=0;d<c.length;d++)r=c[d],a=n.getAttribute(r),a&&i.push(`[${r}="${a}"]`);return i.join("")}function se(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.substr(0,t)}...`}function oe(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const i=e[t];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function re(e,t,n=!1){return!!q(e)&&(z(t,"RegExp")?t.test(e):!!q(t)&&(n?e===t:e.includes(t)))}function ae(e,t=[],n=!1){return t.some((t=>re(e,t,n)))}function de(e,t,n){if(!(t in e))return;const i=e[t],s=n(i);if("function"==typeof s)try{ce(s,i)}catch(e){}e[t]=s}function le(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function ce(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,le(e,"__sentry_original__",t)}function he(e){return e.__sentry_original__}function _e(e){if(j(e))return{message:e.message,name:e.name,stack:e.stack,...pe(e)};if(Q(e)){const t={type:e.type,target:ue(e.target),currentTarget:ue(e.currentTarget),...pe(e)};return"undefined"!=typeof CustomEvent&&ee(e,CustomEvent)&&(t.detail=e.detail),t}return e}function ue(e){try{return t=e,"undefined"!=typeof Element&&ee(t,Element)?ne(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function pe(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Ee(e,t=40){const n=Object.keys(_e(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return se(n[0],t);for(let e=n.length;e>0;e--){const i=n.slice(0,e).join(", ");if(!(i.length>t))return e===n.length?i:se(i,t)}return""}function me(e){return ge(e,new Map)}function ge(e,t){if(J(e)){const n=t.get(e);if(void 0!==n)return n;const i={};t.set(e,i);for(const n of Object.keys(e))void 0!==e[n]&&(i[n]=ge(e[n],t));return i}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const i=[];return t.set(e,i),e.forEach((e=>{i.push(ge(e,t))})),i}return e}function fe(){const e=B.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Se(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Re(e){const{message:t,event_id:n}=e;if(t)return t;const i=Se(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function ye(e,t,n){const i=e.exception=e.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function Oe(e,t){const n=Se(e);if(!n)return;const i=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...i,...t},t&&"data"in t){const e={...i&&i.data,...t.data};n.mechanism.data=e}}function Ce(e){if(e&&e.__sentry_captured__)return!0;try{le(e,"__sentry_captured__",!0)}catch(e){}return!1}var ve;function Te(e){return new Ae((t=>{t(e)}))}function Ne(e){return new Ae(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(ve||(ve={}));class Ae{__init(){this._state=ve.PENDING}__init2(){this._handlers=[]}constructor(e){Ae.prototype.__init.call(this),Ae.prototype.__init2.call(this),Ae.prototype.__init3.call(this),Ae.prototype.__init4.call(this),Ae.prototype.__init5.call(this),Ae.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Ae(((n,i)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){i(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){i(e)}else i(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Ae(((t,n)=>{let i,s;return this.then((t=>{s=!1,i=t,e&&e()}),(t=>{s=!0,i=t,e&&e()})).then((()=>{s?n(i):t(i)}))}))}__init3(){this._resolve=e=>{this._setResult(ve.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(ve.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===ve.PENDING&&(Z(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===ve.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===ve.RESOLVED&&e[1](this._value),this._state===ve.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function De(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const i=[];for(const s of e.split("\n").slice(n)){const e=s.replace(/\(error: (.*)\)/,"$1");for(const n of t){const t=n(e);if(t){i.push(t);break}}}return function(e){if(!e.length)return[];let t=e;const n=t[0].function||"",i=t[t.length-1].function||"";-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1));-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1));return t.slice(0,50).map((e=>({...e,filename:e.filename||t[0].filename,function:e.function||"?"}))).reverse()}(i)}}const Ie="<anonymous>";function be(e){try{return e&&"function"==typeof e&&e.name||Ie}catch(e){return Ie}}function we(e,t=1/0,n=1/0){try{return Le("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Pe(e,t=3,n=102400){const i=we(e,t);return s=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>n?Pe(e,t-1,n):i;var s}function Le(e,t,i=1/0,s=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[r,a]=o;if(null===t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(d=t)||d==d))return t;var d;const l=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==n.g&&t===n.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":function(e){return J(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?`[Function: ${be(t)}]`:"symbol"==typeof t?`[${String(t)}]`:"bigint"==typeof t?`[BigInt: ${String(t)}]`:`[object ${Object.getPrototypeOf(t).constructor.name}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;if(0===i)return l.replace("object ","");if(r(t))return"[Circular ~]";const c=t;if(c&&"function"==typeof c.toJSON)try{return Le("",c.toJSON(),i-1,s,o)}catch(e){}const h=Array.isArray(t)?[]:{};let _=0;const u=_e(t);for(const e in u){if(!Object.prototype.hasOwnProperty.call(u,e))continue;if(_>=s){h[e]="[MaxProperties ~]";break}const t=u[e];h[e]=Le(e,t,i-1,s,o),_+=1}return a(t),h}function Fe(e,t=[]){return[e,t]}function xe(e,t){const[n,i]=e;return[n,[...i,t]]}function Ue(e,t){e[1].forEach((e=>{const n=e[0].type;t(e,n)}))}function ke(e,t){return(t||new TextEncoder).encode(e)}function Me(e,t){const[n,i]=e;let s=JSON.stringify(n);function o(e){"string"==typeof s?s="string"==typeof e?s+e:[ke(s,t),e]:s.push("string"==typeof e?ke(e,t):e)}for(const e of i){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(we(n))}o(e)}}return"string"==typeof s?s:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return n}(s)}function Be(e,t){const n="string"==typeof e.data?ke(e.data,t):e.data;return[me({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const He={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function Ge(e){return He[e]}var We=n(170);function Ve(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Ye(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function je(e,t={}){const n="string"==typeof t?t:t.tunnel,i="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${Ve(e)}${e.projectId}/envelope/`}(e)}?${Ye(e,i)}`}function ze(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function $e(e,t,n,i){const s=ze(n),o=e.type||"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const r=function(e,t,n,i){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:U(i)},..."transaction"===e.type&&s&&{trace:me({...s})}}}(e,s,i,t);delete e.sdkProcessingMetadata;return Fe(r,[[{type:o},e]])}var Ke=n(176);function qe(e){const t=(0,We.ph)(),n={sid:fe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return me({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Xe(n,e),n}function Xe(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,We.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:fe()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class Je{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new Je;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&Xe(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Je?t:this}return e instanceof Je?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):J(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const i={timestamp:(0,We.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-n),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction&&this._span.transaction.name;t&&(e.tags={transaction:t,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Qe(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,n,i=0){return new Ae(((s,o)=>{const r=e[i];if(null===t||"function"!=typeof r)s(t);else{const a=r({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.id&&null===a&&V.log(`Event processor "${r.id}" dropped event`),Z(a)?a.then((t=>this._notifyEventProcessors(e,t,n,i+1).then(s))).then(null,o):this._notifyEventProcessors(e,a,n,i+1).then(s).then(null,o)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Qe(){return(0,B.YO)("globalEventProcessors",(()=>[]))}function Ze(e){Qe().push(e)}const et="00000000000000000000000000000000",tt=100;class nt{__init(){this._stack=[{}]}constructor(e,t=new Je,n=4){this._version=n,nt.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Je.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=new Error("Sentry syntheticException");return this._lastEventId=this._withClient(((i,s)=>i.captureException(e,{originalException:e,syntheticException:n,...t},s)))||et,this._lastEventId}captureMessage(e,t,n){const i=new Error(e);return this._lastEventId=this._withClient(((s,o)=>s.captureMessage(e,t,{originalException:e,syntheticException:i,...n},o)))||et,this._lastEventId}captureEvent(e,t){const n=this._withClient(((n,i)=>n.captureEvent(e,{...t},i)))||et;return"transaction"!==e.type&&(this._lastEventId=n),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:i}=this.getStackTop();if(!n||!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=tt}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const r={timestamp:(0,We.yW)(),...e},a=s?G((()=>s(r,t))):r;null!==a&&n.addBreadcrumb(a,o)}setUser(e){const t=this.getScope();t&&t.setUser(e)}setTags(e){const t=this.getScope();t&&t.setTags(e)}setExtras(e){const t=this.getScope();t&&t.setExtras(e)}setTag(e,t){const n=this.getScope();n&&n.setTag(e,t)}setExtra(e,t){const n=this.getScope();n&&n.setExtra(e,t)}setContext(e,t){const n=this.getScope();n&&n.setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();t&&n&&e(t)}run(e){const t=st(this);try{e(this)}finally{st(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),Xe(e,n)}(n),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:i,environment:s}=n&&n.getOptions()||{},{userAgent:o}=B.n2.navigator||{},r=qe({release:i,environment:s,...t&&{user:t.getUser()},...o&&{userAgent:o},...e});if(t){const e=t.getSession&&t.getSession();e&&"ok"===e.status&&Xe(e,{status:"exited"}),this.endSession(),t.setSession(r)}return r}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(!e)return;const n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();return n&&e(n,t)}_callExtensionMethod(e,...t){const n=it().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function it(){return B.n2.__SENTRY__=B.n2.__SENTRY__||{extensions:{},hub:void 0},B.n2}function st(e){const t=it(),n=at(t);return dt(t,e),n}function ot(){const e=it();return rt(e)&&!at(e).isOlderThan(4)||dt(e,new nt),(0,Ke.KV)()?function(e){try{const t=it().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return at(e);if(!rt(n)||at(n).isOlderThan(4)){const t=at(e).getStackTop();dt(n,new nt(t.client,Je.clone(t.scope)))}return at(n)}catch(t){return at(e)}}(e):at(e)}function rt(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function at(e){return(0,B.YO)("hub",(()=>new nt),e)}function dt(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}const lt=[];const ct="Not capturing exception because it's already been captured.";class ht{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(ht.prototype.__init.call(this),ht.prototype.__init2.call(this),ht.prototype.__init3.call(this),ht.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=M(e.dsn);const t=je(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("No DSN provided, client will not do anything.")}captureException(e,t,n){if(Ce(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log(ct));let i;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{i=e}))),i}captureMessage(e,t,n,i){let s;const o=X(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(o.then((e=>this._captureEvent(e,n,i))).then((e=>{s=e}))),s}captureEvent(e,t,n){if(t&&t.originalException&&Ce(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log(ct));let i;return this._process(this._captureEvent(e,t,n).then((e=>{i=e}))),i}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Xe(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):Te(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{t[e.name]=e,-1===lt.indexOf(e.name)&&(e.setupOnce(Ze,ot),lt.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log(`Integration installed: ${e.name}`))})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let n=$e(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=xe(n,Be(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(e){if(this._dsn){const t=function(e,t,n,i){const s=ze(n);return Fe({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!i&&{dsn:U(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(e,t){let n=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const e of s){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&n)&&(Xe(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ae((t=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),t(!0)):(n+=1,e&&n>=e&&(clearInterval(i),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=this.getOptions(),o={...e,event_id:e.event_id||t.event_id||fe(),timestamp:e.timestamp||(0,We.yW)()};this._applyClientOptions(o),this._applyIntegrationsMetadata(o);let r=n;t.captureContext&&(r=Je.clone(r).update(t.captureContext));let a=Te(o);if(r&&r.getAttachments){const e=[...t.attachments||[],...r.getAttachments()];e.length&&(t.attachments=e),a=r.applyToEvent(o,t)}return a.then((e=>"number"==typeof i&&i>0?this._normalizeEvent(e,i,s):e))}_normalizeEvent(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:we(e.data,t,n)}})))},...e.user&&{user:we(e.user,t,n)},...e.contexts&&{contexts:we(e.contexts,t,n)},...e.extra&&{extra:we(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=we(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map((e=>(e.data&&(e.data=we(e.data,t,n)),e)))),i}_applyClientOptions(e){const t=this.getOptions(),{environment:n,release:i,dist:s,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==s&&(e.dist=s),e.message&&(e.message=se(e.message,o));const r=e.exception&&e.exception.values&&e.exception.values[0];r&&r.value&&(r.value=se(r.value,o));const a=e.request;a&&a.url&&(a.url=se(a.url,o))}_applyIntegrationsMetadata(e){const t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?V.log(t.message):V.warn(t)}}))}_processEvent(e,t,n){const i=this.getOptions(),{sampleRate:s}=i;if(!this._isEnabled())return Ne(new F("SDK not enabled, will not capture event.","log"));const o="transaction"===e.type,r=o?"beforeSendTransaction":"beforeSend",a=i[r];return!o&&"number"==typeof s&&Math.random()>s?(this.recordDroppedEvent("sample_rate","error"),Ne(new F(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"))):this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",e.type||"error"),new F("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__||!a)return n;return function(e,t){const n=`\`${t}\` must return \`null\` or a valid event.`;if(Z(e))return e.then((e=>{if(!J(e)&&null!==e)throw new F(n);return e}),(e=>{throw new F(`\`${t}\` rejected with ${e}`)}));if(!J(e)&&null!==e)throw new F(n);return e}(a(n,t),r)})).then((i=>{if(null===i)throw this.recordDroppedEvent("before_send",e.type||"error"),new F(`\`${r}\` returned \`null\`, will not send event.`,"log");const s=n&&n.getSession();!o&&s&&this._updateSessionFromEvent(s,i);const a=i.transaction_info;if(o&&a&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...a,source:e,changes:[...a.changes,{source:e,timestamp:i.timestamp,propagations:a.propagations}]}}return this.sendEvent(i,t),i})).then(null,(e=>{if(e instanceof F)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new F(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing+=1,e.then((e=>(this._numProcessing-=1,e)),(e=>(this._numProcessing-=1,e)))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error("Error while sending event:",e)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,i]=t.split(":");return{reason:n,category:i,quantity:e[t]}}))}}const _t="7.21.1";function ut(e,t){const n=Et(e,t),i={type:t&&t.name,value:gt(t)};return n.length&&(i.stacktrace={frames:n}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function pt(e,t){return{exception:{values:[ut(e,t)]}}}function Et(e,t){const n=t.stacktrace||t.stack||"",i=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(mt.test(e.message))return 1}return 0}(t);try{return e(n,i)}catch(e){}return[]}const mt=/Minified React error #\d+;/i;function gt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ft(e,t,n,i,s){let o;if($(t)&&t.error){return pt(e,t.error)}if(K(t)||z(t,"DOMException")){const s=t;if("stack"in t)o=pt(e,t);else{const t=s.name||(K(s)?"DOMError":"DOMException"),r=s.message?`${t}: ${s.message}`:t;o=St(e,r,n,i),ye(o,r)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}if(j(t))return pt(e,t);if(J(t)||Q(t)){return o=function(e,t,n,i){const s=ot().getClient(),o=s&&s.getOptions().normalizeDepth,r={exception:{values:[{type:Q(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:`Non-Error ${i?"promise rejection":"exception"} captured with keys: ${Ee(t)}`}]},extra:{__serialized__:Pe(t,o)}};if(n){const t=Et(e,n);t.length&&(r.exception.values[0].stacktrace={frames:t})}return r}(e,t,n,s),Oe(o,{synthetic:!0}),o}return o=St(e,t,n,i),ye(o,`${t}`,void 0),Oe(o,{synthetic:!0}),o}function St(e,t,n,i){const s={message:t};if(i&&n){const i=Et(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}return s}function Rt(e,t){return ot().captureException(e,{captureContext:t})}function yt(e){ot().withScope(e)}const Ot=B.n2;let Ct=0;function vt(){return Ct>0}function Tt(){Ct+=1,setTimeout((()=>{Ct-=1}))}function Nt(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(he(e))return e}catch(t){return e}const i=function(){const i=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const s=i.map((e=>Nt(e,t)));return e.apply(this,s)}catch(e){throw Tt(),yt((n=>{n.addEventProcessor((e=>(t.mechanism&&(ye(e,void 0,void 0),Oe(e,t.mechanism)),e.extra={...e.extra,arguments:i},e))),Rt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}catch(e){}ce(i,e),le(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>e.name})}catch(e){}return i}const At=(0,B.Rf)();function Dt(){if(!("fetch"in At))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function It(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const bt=(0,B.Rf)(),wt={},Pt={};function Lt(e){if(!Pt[e])switch(Pt[e]=!0,e){case"console":!function(){if(!("console"in bt))return;H.forEach((function(e){e in bt.console&&de(bt.console,e,(function(t){return function(...n){xt("console",{args:n,level:e}),t&&t.apply(bt.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in bt))return;const e=xt.bind(null,"dom"),t=Gt(e,!0);bt.document.addEventListener("click",t,!1),bt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=bt[t]&&bt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(de(n,"addEventListener",(function(t){return function(n,i,s){if("click"===n||"keypress"==n)try{const i=this,o=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},r=o[n]=o[n]||{refCount:0};if(!r.handler){const i=Gt(e);r.handler=i,t.call(this,n,i,s)}r.refCount+=1}catch(e){}return t.call(this,n,i,s)}})),de(n,"removeEventListener",(function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},o=s[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,i),o.handler=void 0,delete s[t]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,i)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in bt))return;const e=XMLHttpRequest.prototype;de(e,"open",(function(e){return function(...t){const n=this,i=t[1],s=n.__sentry_xhr__={method:q(t[0])?t[0].toUpperCase():t[0],url:t[1]};q(i)&&"POST"===s.method&&i.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const o=function(){if(4===n.readyState){try{s.status_code=n.status}catch(e){}xt("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?de(n,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(n,t)}})):n.addEventListener("readystatechange",o),e.apply(n,t)}})),de(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),xt("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function(){if(!function(){if(!Dt())return!1;if(It(At.fetch))return!0;let e=!1;const t=At.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=It(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}())return;de(bt,"fetch",(function(e){return function(...t){const n={args:t,fetchData:{method:Ut(t),url:kt(t)},startTimestamp:Date.now()};return xt("fetch",{...n}),e.apply(bt,t).then((e=>(xt("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw xt("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}();break;case"history":!function(){if(!function(){const e=At.chrome,t=e&&e.app&&e.app.runtime,n="history"in At&&!!At.history.pushState&&!!At.history.replaceState;return!t&&n}())return;const e=bt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Mt,t=String(n);Mt=t,xt("history",{from:e,to:t})}return e.apply(this,t)}}bt.onpopstate=function(...t){const n=bt.location.href,i=Mt;if(Mt=n,xt("history",{from:i,to:n}),e)try{return e.apply(this,t)}catch(e){}},de(bt.history,"pushState",t),de(bt.history,"replaceState",t)}();break;case"error":Wt=bt.onerror,bt.onerror=function(e,t,n,i,s){return xt("error",{column:i,error:s,line:n,msg:e,url:t}),!!Wt&&Wt.apply(this,arguments)};break;case"unhandledrejection":Vt=bt.onunhandledrejection,bt.onunhandledrejection=function(e){return xt("unhandledrejection",e),!Vt||Vt.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("unknown instrumentation type:",e))}}function Ft(e,t){wt[e]=wt[e]||[],wt[e].push(t),Lt(e)}function xt(e,t){if(e&&wt[e])for(const n of wt[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${be(n)}\nError:`,t)}}function Ut(e=[]){return"Request"in bt&&ee(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function kt(e=[]){return"string"==typeof e[0]?e[0]:"Request"in bt&&ee(e[0],Request)?e[0].url:String(e[0])}let Mt;let Bt,Ht;function Gt(e,t=!1){return n=>{if(!n||Ht===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n))return;const i="keypress"===n.type?"input":n.type;(void 0===Bt||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Ht,n))&&(e({event:n,name:i,global:t}),Ht=n),clearTimeout(Bt),Bt=bt.setTimeout((()=>{Bt=void 0}),1e3)}}let Wt=null;let Vt=null;const Yt=["fatal","error","warning","log","info","debug"];function jt(e){return"warn"===e?"warning":Yt.includes(e)?e:"log"}function zt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+i}}const $t="Breadcrumbs";class Kt{static __initStatic(){this.id=$t}__init(){this.name=Kt.id}constructor(e){Kt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Ft("console",qt),this.options.dom&&Ft("dom",function(e){function t(t){let n,i="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof i&&(i=[i]);try{n=t.event.target?ne(t.event.target,i):ne(t.event,i)}catch(e){n="<unknown>"}0!==n.length&&ot().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})}return t}(this.options.dom)),this.options.xhr&&Ft("xhr",Xt),this.options.fetch&&Ft("fetch",Jt),this.options.history&&Ft("history",Qt)}}function qt(e){for(let t=0;t<e.args.length;t++)if("ref=Ref<"===e.args[t]){e.args[t+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:jt(e.level),message:oe(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${oe(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}ot().addBreadcrumb(t,{input:e.args,level:e.level})}function Xt(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;const{method:t,url:n,status_code:i,body:s}=e.xhr.__sentry_xhr__||{};ot().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:i},type:"http"},{xhr:e.xhr,input:s})}else;}function Jt(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?ot().addBreadcrumb({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args}):ot().addBreadcrumb({category:"fetch",data:{...e.fetchData,status_code:e.response.status},type:"http"},{input:e.args,response:e.response})))}function Qt(e){let t=e.from,n=e.to;const i=zt(Ot.location.href);let s=zt(t);const o=zt(n);s.path||(s=i),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),i.protocol===s.protocol&&i.host===s.host&&(t=s.relative),ot().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}Kt.__initStatic();class Zt extends ht{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:_t}],version:_t},super(e),e.sendClientReports&&Ot.document&&Ot.document.addEventListener("visibilitychange",(()=>{"hidden"===Ot.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,i){const s=ft(e,t,n&&n.syntheticException||void 0,i);return Oe(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Te(s)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",i,s){const o=St(e,t,i&&i.syntheticException||void 0,s);return o.level=n,i&&i.event_id&&(o.event_id=i.event_id),Te(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){const n=this.getIntegrationById($t);n&&n.options&&n.options.sentry&&ot().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Re(e)},{event:e}),super.sendEvent(e,t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log("Sending outcomes:",e);const t=je(this._dsn,this._options),n=(i=e,Fe((s=this._options.tunnel&&U(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:o||(0,We.yW)(),discarded_events:i}]]));var i,s,o;try{const e="[object Navigator]"===Object.prototype.toString.call(Ot&&Ot.navigator);if(e&&"function"==typeof Ot.navigator.sendBeacon&&!this._options.transportOptions){Ot.navigator.sendBeacon.bind(Ot.navigator)(t,Me(n))}else this._sendEnvelope(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error(e)}}}let en;class tn{constructor(){tn.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=tn.id}setupOnce(){en=Function.prototype.toString,Function.prototype.toString=function(...e){const t=he(this)||this;return en.apply(t,e)}}}tn.__initStatic();const nn=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class sn{static __initStatic(){this.id="InboundFilters"}__init(){this.name=sn.id}constructor(e={}){this._options=e,sn.prototype.__init.call(this)}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(sn);if(t){const i=n.getClient(),s=i?i.getOptions():{},o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...nn],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,s);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Re(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;return function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error(`Cannot extract message for event ${Re(e)}`),[]}return[]}(e).some((e=>ae(e,t)))}(e,t.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Re(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=on(e);return!!n&&ae(n,t)}(e,t.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Re(e)}.\nUrl: ${on(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=on(e);return!n||ae(n,t)}(e,t.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Re(e)}.\nUrl: ${on(e)}`),!0;return!1}(e,o)?null:e}}return e};n.id=this.name,e(n)}}function on(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error(`Cannot extract url for event ${Re(e)}`),null}}sn.__initStatic();class rn{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=rn.id}__init2(){this._installFunc={onerror:an,onunhandledrejection:dn}}constructor(e){rn.prototype.__init.call(this),rn.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const i=this._installFunc[n];i&&e[n]&&(t=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.log(`Global Handler attached: ${t}`),i(),this._installFunc[n]=void 0)}var t}}function an(){Ft("error",(e=>{const[t,n,i]=hn();if(!t.getIntegration(rn))return;const{msg:s,url:o,line:r,column:a,error:d}=e;if(vt()||d&&d.__sentry_own_request__)return;const l=void 0===d&&q(s)?function(e,t,n,i){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=$(e)?e.message:e,r="Error";const a=o.match(s);a&&(r=a[1],o=a[2]);return ln({exception:{values:[{type:r,value:o}]}},t,n,i)}(s,o,r,a):ln(ft(n,d||s,void 0,i,!1),o,r,a);l.level="error",cn(t,d,l,"onerror")}))}function dn(){Ft("unhandledrejection",(e=>{const[t,n,i]=hn();if(!t.getIntegration(rn))return;let s=e;try{"reason"in e?s=e.reason:"detail"in e&&"reason"in e.detail&&(s=e.detail.reason)}catch(e){}if(vt()||s&&s.__sentry_own_request__)return!0;const o=X(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:ft(n,s,void 0,i,!0);o.level="error",cn(t,s,o,"onunhandledrejection")}))}function ln(e,t,n,i){const s=e.exception=e.exception||{},o=s.values=s.values||[],r=o[0]=o[0]||{},a=r.stacktrace=r.stacktrace||{},d=a.frames=a.frames||[],l=isNaN(parseInt(i,10))?void 0:i,c=isNaN(parseInt(n,10))?void 0:n,h=q(t)&&t.length>0?t:function(){try{return te.document.location.href}catch(e){return""}}();return 0===d.length&&d.push({colno:l,filename:h,function:"?",in_app:!0,lineno:c}),e}function cn(e,t,n,i){Oe(n,{handled:!1,type:i}),e.captureEvent(n,{originalException:t})}function hn(){const e=ot(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}rn.__initStatic();const _n=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class un{static __initStatic(){this.id="TryCatch"}__init(){this.name=un.id}constructor(e){un.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&de(Ot,"setTimeout",pn),this._options.setInterval&&de(Ot,"setInterval",pn),this._options.requestAnimationFrame&&de(Ot,"requestAnimationFrame",En),this._options.XMLHttpRequest&&"XMLHttpRequest"in Ot&&de(XMLHttpRequest.prototype,"send",mn);const e=this._options.eventTarget;if(e){(Array.isArray(e)?e:_n).forEach(gn)}}}function pn(e){return function(...t){const n=t[0];return t[0]=Nt(n,{mechanism:{data:{function:be(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function En(e){return function(t){return e.apply(this,[Nt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:be(e)},handled:!0,type:"instrument"}})])}}function mn(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&de(n,e,(function(t){const n={mechanism:{data:{function:e,handler:be(t)},handled:!0,type:"instrument"}},i=he(t);return i&&(n.mechanism.data.handler=be(i)),Nt(t,n)}))})),e.apply(this,t)}}function gn(e){const t=Ot,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(de(n,"addEventListener",(function(t){return function(n,i,s){try{"function"==typeof i.handleEvent&&(i.handleEvent=Nt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:be(i),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Nt(i,{mechanism:{data:{function:"addEventListener",handler:be(i),target:e},handled:!0,type:"instrument"}}),s])}})),de(n,"removeEventListener",(function(e){return function(t,n,i){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&e.call(this,t,n,i)}catch(e){}return e.call(this,t,s,i)}})))}un.__initStatic();class fn{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=fn.id}constructor(e={}){fn.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){const e=ot().getClient();e&&Ze(((t,n)=>{const i=ot().getIntegration(fn);return i?function(e,t,n,i,s){if(!(i.exception&&i.exception.values&&s&&ee(s.originalException,Error)))return i;const o=Sn(e,n,s.originalException,t);return i.exception.values=[...o,...i.exception.values],i}(e.getOptions().stackParser,i._key,i._limit,t,n):t}))}}function Sn(e,t,n,i,s=[]){if(!ee(n[i],Error)||s.length+1>=t)return s;const o=ut(e,n[i]);return Sn(e,t,n[i],i,[o,...s])}fn.__initStatic();class Rn{constructor(){Rn.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Rn.id}setupOnce(){Ze((e=>{if(ot().getIntegration(Rn)){if(!Ot.navigator&&!Ot.location&&!Ot.document)return e;const t=e.request&&e.request.url||Ot.location&&Ot.location.href,{referrer:n}=Ot.document||{},{userAgent:i}=Ot.navigator||{},s={...t&&{url:t},headers:{...e.request&&e.request.headers,...n&&{Referer:n},...i&&{"User-Agent":i}}};return{...e,request:s}}return e}))}}Rn.__initStatic();class yn{constructor(){yn.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=yn.id}setupOnce(e,t){const n=e=>{const n=t().getIntegration(yn);if(n){try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,i=t.message;if(!n&&!i)return!1;if(n&&!i||!n&&i)return!1;if(n!==i)return!1;if(!Cn(e,t))return!1;if(!On(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=vn(t),i=vn(e);if(!n||!i)return!1;if(n.type!==i.type||n.value!==i.value)return!1;if(!Cn(e,t))return!1;if(!On(e,t))return!1;return!0}(e,t))return!0;return!1}(e,n._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function On(e,t){let n=Tn(e),i=Tn(t);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(i.length!==n.length)return!1;for(let e=0;e<i.length;e++){const t=i[e],s=n[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function Cn(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;try{return!(n.join("")!==i.join(""))}catch(e){return!1}}function vn(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Tn(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}yn.__initStatic();let Nn={};Ot.Sentry&&Ot.Sentry.Integrations&&(Nn=Ot.Sentry.Integrations);const An={...Nn,...e,...a};function Dn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(i){if(!(void 0===e||t.length<e))return Ne(new F("Not adding Promise because buffer limit was reached."));const s=i();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new Ae(((n,i)=>{let s=t.length;if(!s)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Te(e).then((()=>{--s||(clearTimeout(o),n(!0))}),i)}))}))}}}function In(e,{statusCode:t,headers:n},i=Date.now()){const s={...e},o=n&&n["x-sentry-rate-limits"],r=n&&n["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,n]=e.split(":",2),o=parseInt(t,10),r=1e3*(isNaN(o)?60:o);if(n)for(const e of n.split(";"))s[e]=i+r;else s.all=i+r}else r?s.all=i+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(r,i):429===t&&(s.all=i+6e4);return s}function bn(e,t,n=Dn(e.bufferSize||30)){let i={};return{send:function(s){const o=[];if(Ue(s,((t,n)=>{const s=Ge(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(i,s)?o.push(t):e.recordDroppedEvent("ratelimit_backoff",s)})),0===o.length)return Te();const r=Fe(s[0],o),a=t=>{Ue(r,((n,i)=>{e.recordDroppedEvent(t,Ge(i))}))};return n.add((()=>t({body:Me(r,e.textEncoder)}).then((e=>{void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),i=In(i,e)}),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error("Failed while sending event:",e),a("network_error")})))).then((e=>e),(e=>{if(e instanceof F)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.error("Skipped sending event because buffer is full."),a("queue_overflow"),Te();throw e}))},flush:e=>n.drain(e)}}let wn;function Pn(e,t=function(){if(wn)return wn;if(It(Ot.fetch))return wn=Ot.fetch.bind(Ot);const e=Ot.document;let t=Ot.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const i=n.contentWindow;i&&i.fetch&&(t=i.fetch),e.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return wn=t.bind(Ot)}()){return bn(e,(function(n){const i={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n.body.length<=65536,...e.fetchOptions};try{return t(e.url,i).then((e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return wn=void 0,Ne(e)}}))}const Ln="?";function Fn(e,t,n,i){const s={filename:e,function:t,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==i&&(s.colno=i),s}const xn=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Un=/\((\S*)(?::(\d+))(?::(\d+))\)/,kn=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Mn=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Bn=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Hn=De(...[[30,e=>{const t=xn.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Un.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Gn(t[1]||Ln,t[2]);return Fn(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=kn.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Mn.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Ln;return[n,e]=Gn(n,e),Fn(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Bn.exec(e);return t?Fn(t[2],t[1]||Ln,+t[3],t[4]?+t[4]:void 0):void 0}]]),Gn=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return n||i?[-1!==e.indexOf("@")?e.split("@")[0]:Ln,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};let Wn;const Vn="error.catcher";class Yn{constructor(){this.sentryClient=new Zt({dsn:C.get("https://48134d56e6314e328619ab23ec620db4@o56819.ingest.sentry.io/5550600"),release:C.get("6.0.7"),integrations:[new An.GlobalHandlers({onerror:!1,onunhandledrejection:!1})],transport:Pn,stackParser:Hn,tracesSampleRate:1,allowUrls:[/mwtw\.presage\.io/i,/mobile-web-tag-www\.devc\.cloud\.ogury\.io/i,/mobile-web-tag-www\.staging\.cloud\.ogury\.io/i],beforeBreadcrumb:e=>e.message&&e.message.startsWith("%c OGURY")?null:e,beforeSend:e=>e.tags&&Object.keys(e.tags).includes(Vn)?e:null})}static getInstance(){return Yn.instance||(Yn.instance=new Yn),Yn.instance.sentryClient}}function jn(e,n=!0){return function(i,s,o){const r=o.value;return o.value=function(...i){try{return r.apply(this,i)}catch(i){let o;i instanceof S?(o={error_type:i.errorType,error_content:i.message},e=i.errorEvent):o=function(e,n,i){var s,o;return C.get("true")&&i&&Yn.getInstance().captureException(e,{captureContext:{tags:{[Vn]:Wn,methodName:n,ad_session_id:(null===(s=window.OG_CONTEXT)||void 0===s?void 0:s.og_ad_session_id)||"",campaign_id:(null===(o=window.OG_CONTEXT)||void 0===o?void 0:o.og_response_campaign_id)||""}}}),{error_type:t.UNKNOWN_ERROR,error_content:e instanceof Error?`${e.stack}`:`${e}`}}(i,s,n),L.handleEvent(e,o),R.exception(i,e)}},o}}class zn{static throwIfAdUnitIsUndefined(e){if(!Boolean(e))throw new S(t.MISSING_AD_UNIT_CONFIG_ERROR,o.AD_UNIT_CONFIG_ERROR,g.MISSING_AD_UNIT_CONFIG_ERROR_DESCRIPTION)}static throwIfUndefinedAdUnitIdOrAssetKey(e){if(!e.ad_unit_id||!e.asset_key)throw new S(t.MISSING_FIELD_ERROR,o.AD_UNIT_CONFIG_ERROR,g.MISSING_FIELD_ERROR_DESCRIPTION)}static throwIfMalformedAssetKey(e){if(e.asset_key&&!this.ASSET_KEY_REGEXP.test(e.asset_key))throw new S(t.MALFORMED_FIELD_ERROR,o.AD_UNIT_CONFIG_ERROR,g.MALFORMED_FIELD_ERROR_DESCRIPTION)}static throwIfMalformedAdUnitId(e){if(e.ad_unit_id.length>255)throw new S(t.OVERFLOW_FIELD_ERROR,o.AD_UNIT_CONFIG_ERROR,g.OVERFLOW_FIELD_ERROR_DESCRIPTION)}static throwIfMalformedMaxWidthOrMaxHeight(e){if(e.max_height&&isNaN(e.max_height)||e.max_width&&isNaN(e.max_width))throw new S(t.PARAMS_TYPE_ERROR,o.AD_UNIT_CONFIG_ERROR,g.PARAMS_TYPE_ERROR_DESCRIPTION)}static throwIfMalformedCallbacks(e){var n,i,s;if((null===(n=e.callbacks)||void 0===n?void 0:n.on_ad_show)&&"function"!=typeof e.callbacks.on_ad_show||(null===(i=e.callbacks)||void 0===i?void 0:i.on_no_ad)&&"function"!=typeof e.callbacks.on_no_ad||(null===(s=e.callbacks)||void 0===s?void 0:s.on_ad_complete)&&"function"!=typeof e.callbacks.on_ad_complete)throw new S(t.MALFORMED_FIELD_ERROR,o.AD_UNIT_CONFIG_ERROR,g.MALFORMED_FIELD_ERROR_DESCRIPTION)}static isValidConfig(e){return zn.throwIfAdUnitIsUndefined(e),zn.throwIfUndefinedAdUnitIdOrAssetKey(e),zn.throwIfMalformedAssetKey(e),zn.throwIfMalformedAdUnitId(e),zn.throwIfMalformedMaxWidthOrMaxHeight(e.params),zn.throwIfMalformedCallbacks(e),O.isHeaderBiddingDeliveryMode()||L.postKeepAliveEvent(i.AD_UNIT_CONFIG_VALID),!0}static isAbortTagExecution(e){var t;return!!Boolean(null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.abort_tag_execution)&&(L.postKeepAliveEvent(i.ABORT_TAG_EXECUTION),!0)}}zn.ASSET_KEY_REGEXP=/(^OGY-)[A-Z0-9]{12}$/;class $n{static checkIsBotUser(e){if(new RegExp(/bot|crawler|spider|crawling/i).test(e.userAgent))throw new S(t.BOT_USER,o.ENVIRONMENT_ERROR,g.BOT_USER_DESCRIPTION)}static isSupportedEnvironment(e){return this.throwIfUnsupportedOs(e),this.throwIfUnsupportedBrowser(e),this.throwIfUnsupportedBrowserVersion(e),!0}static isIosChromeEnvironment(e){return/\b(?:crios)\/([\w\.]+)/i.test(e.userAgent)}static isThirdPartyEnabled(e){return!O.isIosDevice(e.userAgent)}static throwIfUnsupportedOs(e){if(!O.isAndroidDevice(e.userAgent)&&!O.isIosDevice(e.userAgent))throw new S(t.UNSUPPORTED_OS,o.ENVIRONMENT_ERROR,void 0,{user_agent:e.userAgent})}static isFacebookBrowser(e){return/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i.test(e.userAgent)}static isSamsungBrowser(e){return/((?:samsung)browser)\/([\w\.]+)/i.test(e.userAgent)}static isChromeBrowser(e){return/\b(?:crmo|crios|Chrome)\/([\w\.]+)/i.test(e.userAgent)}static throwIfUnsupportedBrowser(e){if(!(this.isSamsungBrowser(e)||this.isChromeBrowser(e)||this.isIosChromeEnvironment(e)||this.isFacebookBrowser(e)||O.isSafariBrowser(e)))throw new S(t.UNSUPPORTED_BROWSER,o.ENVIRONMENT_ERROR,void 0,{user_agent:e.userAgent})}static isSupportedChromeVersion(e){const t=e.userAgent.match(/CriOS\/(\d+)\.(\d+)\.(\d+)\.(\d+)/),n=e.userAgent.match(/Chrome\/(\d+)\.(\d+)\.(\d+)\.(\d+)/);return(!!n&&parseInt(n[1])||!!t&&parseInt(t[1]))>=83}static isSupportedSafariVersion(e){const t=e.userAgent.match(/Version\/(\d+)\.(\d+)/);return!!t&&parseInt(t[1])>=10}static isFbBrowserOnIos(e){return this.isFacebookBrowser(e)&&O.isIosDevice(e.userAgent)}static throwIfUnsupportedBrowserVersion(e){if(!this.isFbBrowserOnIos(e)&&!this.isSupportedChromeVersion(e)&&!this.isSupportedSafariVersion(e))throw new S(t.UNSUPPORTED_BROWSER_VERSION,o.ENVIRONMENT_ERROR,void 0,{user_agent:e.userAgent})}}class Kn{constructor(e,t,n,i=!1){this.isAccepted=e,this.gdprApplies=t,this.tcString=n,this.isOguryCmp=i}}var qn;!function(e){e[e.STORAGE_AND_ACCESS_OF_INFORMATION=1]="STORAGE_AND_ACCESS_OF_INFORMATION",e[e.SELECT_BASIC_ADS=2]="SELECT_BASIC_ADS",e[e.MEASURE_AD_PERFORMANCE=7]="MEASURE_AD_PERFORMANCE",e[e.DEVELOP_AND_IMPROVE_PRODUCTS=10]="DEVELOP_AND_IMPROVE_PRODUCTS"}(qn||(qn={}));var Xn,Jn,Qn,Zn,ei,ti=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class ni{run(e){this.onConsentResponse=e,O.waitFor((()=>Boolean(O.getWindow().__tcfapi)),this.getPingReturn.bind(this),C.get("3000"))}isGDPRApplies(e){return Boolean(e.gdprApplies)}isOguryCmp(e){return e.cmpId===ni.OGURY_CMP_ID}isOguryDeliveryAccepted(e){var t,n;const i=null===(t=e.purpose)||void 0===t?void 0:t.consents,s=null===(n=e.vendor)||void 0===n?void 0:n.consents;return i&&!0===i[qn.STORAGE_AND_ACCESS_OF_INFORMATION]&&!0===i[qn.SELECT_BASIC_ADS]&&!0===i[qn.MEASURE_AD_PERFORMANCE]&&!0===i[qn.DEVELOP_AND_IMPROVE_PRODUCTS]&&s&&!0===s[ni.OGURY_VENDOR_ID]}getPingReturn(e){if(e)throw new S(t.TCFAPI_NOT_AVAILABLE,o.CONSENT_DENIED,g.TCFAPI_NOT_AVAILABLE_DESCRIPTION);O.getWindow().__tcfapi("ping",ni.TCF_VERSION,this.callbackGetPingReturn.bind(this))}callbackGetPingReturn(e){if(!e)throw new S(t.EMPTY_PING,o.CONSENT_DENIED,g.EMPTY_PING_DESCRIPTION);this.addTCDataChangeEventListener()}addTCDataChangeEventListener(){O.getWindow().__tcfapi("addEventListener",ni.TCF_VERSION,this.callbackAddTCDataChangeEventListener.bind(this))}callbackAddTCDataChangeEventListener(e,n){if(!n)throw new S(t.TC_DATA_LISTENER_NOT_SUCCESS,o.CONSENT_DENIED,g.TC_DATA_LISTENER_NOT_SUCCESS_DESCRIPTION);"useractioncomplete"!==e.eventStatus&&"tcloaded"!==e.eventStatus||(O.getWindow().__tcfapi("removeEventListener",ni.TCF_VERSION,this.callbackTcfApiRemoveEventListener.bind(this),e.listenerId),this.fireConsentStatusEvent(e))}callbackTcfApiRemoveEventListener(e){e||R.error("cannot set callback for __tcfapi.removeEventListener")}fireConsentStatusEvent(e){const n=this.isGDPRApplies(e),s=new Kn(this.isOguryDeliveryAccepted(e),n,e.tcString,this.isOguryCmp(e));if(!s.isAccepted)throw new S(t.CONSENT_DENIED,o.CONSENT_DENIED,g.CONSENT_DENIED);if(!Boolean(e.tcString))throw new S(t.EMPTY_TC_STRING,o.CONSENT_DENIED,g.EMPTY_TC_STRING_DESCRIPTION);O.isHeaderBiddingDeliveryMode()||L.postKeepAliveEvent(i.CONSENT_ACCEPT),this.onConsentResponse(s)}}ni.OGURY_VENDOR_ID=31,ni.TCF_VERSION=2,ni.OGURY_CMP_ID=45,ti([jn(o.CONSENT_DENIED)],ni.prototype,"getPingReturn",null),ti([jn(o.CONSENT_DENIED)],ni.prototype,"callbackGetPingReturn",null),ti([jn(o.CONSENT_DENIED)],ni.prototype,"callbackAddTCDataChangeEventListener",null),ti([jn(o.CONSENT_DENIED)],ni.prototype,"fireConsentStatusEvent",null),function(e){e.OVERLAY_THUMBNAIL="overlay_thumbnail",e.HEADER_AD="header_ad",e.FOOTER_AD="footer_ad"}(Xn||(Xn={}));class ii{static appendOnTop(e){O.getWindow().document.body.appendChild(e)}static appendOnTopHead(e){O.getWindow().document.head.appendChild(e)}static appendOnElement(e,t){e.appendChild(t)}static appendFirstOnElement(e,t){if(!e.firstChild)return ii.appendOnElement(e,t);e.firstChild.before(t)}static appendAfterElement(e,t){const n=this.getElementByQuerySelector(e);n.parentElement.insertBefore(t,n.nextElementSibling)}static appendBeforeElement(e,t){this.getElementByQuerySelector(e).before(t)}static getElementByQuerySelector(e){return O.getWindow().document.querySelector(e)}static adSlotExist(e){const t=O.getWindow().document.querySelector(e);return Boolean(t)}static isAdSlotSelectorExists(e){return!!e&&(!!ii.getElementByQuerySelector(e)||(R.warning("AdSlotSelector has not been found : ",e),L.postKeepAliveEvent(s.AD_SLOT_SELECTOR_NOT_FOUND,{details:JSON.stringify({querySelector:e})}),!1))}static isAdSlotAndParentVisible(e,t){const n=t||O.getWindow().document.querySelector(e);return"none"===window.getComputedStyle(n).display?(R.warning("AdSlotSelector exist but is in hidden div : ",e),!1):!n.parentElement||this.isAdSlotAndParentVisible(e,n.parentElement)}static isQuerySelectorAboveTheFold(e,t){const n=O.getWindow().document.querySelector(e).getBoundingClientRect().bottom-t<=O.getClientHeight();return n||L.postKeepAliveEvent(o.AD_SLOT_NOT_IN_VIEWPORT),n}static isAboveDomHeader(e,n){const i=this.getElementByQuerySelector(n),s=O.getWindow().document.querySelector(e),r=i.compareDocumentPosition(s);if(r&Node.DOCUMENT_POSITION_CONTAINED_BY)throw new S(t.AD_SLOT_DESCENDANT,o.RENDERING_ERROR,g.AD_SLOT_DESCENDANT_DESCRIPTION);if(r&Node.DOCUMENT_POSITION_CONTAINS)throw new S(t.AD_SLOT_ANCESTOR,o.RENDERING_ERROR,g.AD_SLOT_ANCESTOR_DESCRIPTION);return Boolean(r&Node.DOCUMENT_POSITION_PRECEDING)}static isStickyElement(e){return"fixed"===window.getComputedStyle(e).position||"sticky"===window.getComputedStyle(e).position}}!function(e){e.OGY_SHOW="ogy_show",e.OGY_HIDE="ogy_hide",e.OGY_PLAY="ogy_play",e.OGY_PAUSE="ogy_pause"}(Jn||(Jn={}));class si{constructor(e,t){this.visibilityEventHandler=this._visibilityChangeEvent.bind(this),this.orientationChangeHandler=this._orientationChangeEvent.bind(this),this.addEventListenerOptions={passive:!0},this.loaderHandlers=e,this.rootFrame=t,this.onHiddenHandler=this.loaderHandlers.onHidden.bind(this.loaderHandlers),this.onShowedHandler=this.loaderHandlers.onShowed.bind(this.loaderHandlers),this.onPauseHandler=this.loaderHandlers.onPause.bind(this.loaderHandlers),this.onPlayHandler=this.loaderHandlers.onPlay.bind(this.loaderHandlers),this.onUnloadHandler=this.loaderHandlers.onUnload.bind(this.loaderHandlers)}run(){this.addOrientationChangeListener(),this.addOgyHideListener(),this.addOgyShowListener(),this.addOgyPlayListener(),this.addOgyPauseListener()}removeListeners(){this.removeVisibilityChangeListener(),this.removeOrientationChangeListener(),this.removeOgyHideListener(),this.removeOgyShowListener(),this.removeVideoLoadListener(),this.removeImageLoadListener(),this.removeOgyPlayListener(),this.removeOgyPauseListener(),this.removeUnloadListener()}addUnloadListener(){window.addEventListener("unload",this.onUnloadHandler,this.addEventListenerOptions)}removeUnloadListener(){window.removeEventListener("unload",this.onUnloadHandler)}addOrientationChangeListener(){window.addEventListener("orientationchange",this.orientationChangeHandler,this.addEventListenerOptions)}removeOrientationChangeListener(){window.removeEventListener("orientationchange",this.orientationChangeHandler)}addVideoLoadListener(){R.info("addVideoLoadListener"),this.videoTimerId=O.waitFor((()=>Boolean(this.loaderHandlers.isFormatReady())),this.reportVideoAdShowingTimeout.bind(this),C.get("10000"))}removeVideoLoadListener(){this.videoTimerId&&clearInterval(this.videoTimerId)}addDisplayLoadListener(){this.imageTimerId=O.waitFor((()=>Boolean(this.loaderHandlers.isFormatReady())),this.reportImageAdShowingTimeout.bind(this),C.get("10000"))}removeImageLoadListener(){this.imageTimerId&&clearInterval(this.imageTimerId)}addOgyHideListener(){O.getWindow().addEventListener(Jn.OGY_HIDE,this.onHiddenHandler,this.addEventListenerOptions)}removeOgyHideListener(){O.getWindow().removeEventListener(Jn.OGY_HIDE,this.onHiddenHandler)}addOgyShowListener(){O.getWindow().addEventListener(Jn.OGY_SHOW,this.onShowedHandler,this.addEventListenerOptions)}removeOgyShowListener(){O.getWindow().removeEventListener(Jn.OGY_SHOW,this.onShowedHandler)}addVisibilityChangeListener(){document.addEventListener("visibilitychange",this.visibilityEventHandler,this.addEventListenerOptions)}removeVisibilityChangeListener(){document.removeEventListener("visibilitychange",this.visibilityEventHandler)}addOgyPlayListener(){O.getWindow().addEventListener(Jn.OGY_PLAY,this.onPlayHandler,this.addEventListenerOptions)}removeOgyPlayListener(){O.getWindow().removeEventListener(Jn.OGY_PLAY,this.onPlayHandler)}addOgyPauseListener(){O.getWindow().addEventListener(Jn.OGY_PAUSE,this.onPauseHandler,this.addEventListenerOptions)}removeOgyPauseListener(){O.getWindow().removeEventListener(Jn.OGY_PAUSE,this.onPauseHandler)}_orientationChangeEvent(){this.loaderHandlers.onChangeOrientation()}_visibilityChangeEvent(){"visible"!==document.visibilityState?this.loaderHandlers.onHiddenWindow():this.loaderHandlers.onViewableWindow()}reportVideoAdShowingTimeout(e){if(e)return this.loaderHandlers.onRenderingError(new S(t.VIDEO_NOT_FOUND,o.RENDERING_ERROR,g.VIDEO_NOT_FOUND_DESCRIPTION))}reportImageAdShowingTimeout(e){if(e)return this.loaderHandlers.onRenderingError(new S(t.IMAGE_NOT_FOUND,o.RENDERING_ERROR,g.IMAGE_NOT_FOUND_DESCRIPTION))}}class oi{constructor(e,t,n,i){this.rootFrame=t,this.adFormatContainer=e,this.mraidSender=n,this.loaderHandlers=i}bunaZiua(){this.mraidSender.ogySdkMraidGateway=this.rootFrame.element.contentWindow.ogySdkMraidGateway,this.mraidSender.sendLoadingState(),this.loaderHandlers.onMraidReady()}useCustomClose(){}ogyVideoAutoplayError(){var e,t;L.postKeepAliveEvent(s.AUTOPLAY_FAILURE),null===(t=(e=this.loaderHandlers).onAutoPlayError)||void 0===t||t.call(e);const n=()=>{var e,t;null===(t=(e=this.loaderHandlers).onAutoPlayTouchStart)||void 0===t||t.call(e),O.getWindow().document.body.removeEventListener("touchstart",n),this.mraidSender.playVideo()};O.getWindow().document.body.addEventListener("touchstart",n)}open({url:e}){this.loaderHandlers.onOpen(e)}expand(){this.loaderHandlers.onExpand(),this.mraidSender.sendExpandState()}close(){this.loaderHandlers.onClose()}ogyForceClose(){this.loaderHandlers.onFinalClose(),this.mraidSender.sendCloseState()}unload(){this.loaderHandlers.onRenderingError(new S(t.UNLOAD_ERROR,o.RENDERING_ERROR,g.UNLOAD_ERROR_DESCRIPTION))}ogyOnAdImpression(){R.debug("ogyOnAdImpression() has been triggered"),this.loaderHandlers.onFormatReady(),this.loaderHandlers.onFormatDisplayed()}}!function(e){e.DEFAULT="default",e.RESIZED="resized",e.EXPANDED="expanded",e.HIDDEN="hidden"}(Qn||(Qn={}));class ri{constructor(e){this.adFormatContainer=e}sendLoadingState(){this.x=this.adFormatContainer.element.offsetLeft,this.y=this.adFormatContainer.element.offsetTop;const e={x:this.x,y:this.y,height:this.adFormatContainer.height,width:this.adFormatContainer.width};this.updatePlacementType(),this.updateSupportFlags(),this.updateScreenSize({height:O.getClientHeight(),width:O.getClientWidth()}),this.updateDefaultPosition(e),this.updateCurrentPosition(e),this.updateOrientationProperties({allowOrientationChange:!0,forceOrientation:"none"}),this.updateResizeProperties({height:this.adFormatContainer.height,width:this.adFormatContainer.width,offsetX:this.x,offsetY:this.y,customClosePosition:"",allowOffscreen:!0}),this.updateExpandProperties({width:this.adFormatContainer.width,height:this.adFormatContainer.height,isModal:!1,useCustomClose:!1}),this.sendReadyState(),this.sendViewabilityState(!0)}sendReadyState(){this.updateState(Qn.DEFAULT),this.updateMaxSize({height:this.adFormatContainer.height,width:this.adFormatContainer.width}),this.updateDefaultPosition({x:this.x,y:this.y,width:this.adFormatContainer.width,height:this.adFormatContainer.height})}sendViewabilityState(e){this.updateViewability(e),e?this.updateExposure(100):this.updateExposure(0)}sendCloseState(){this.sendViewabilityState(!1),this.updateState(Qn.HIDDEN)}sendUpdateOrientationState(){const e=O.getClientHeight()>O.getClientWidth()?"portrait":"landscape";this.updateScreenSize({width:O.getClientWidth(),height:O.getClientHeight()}),this.updateCurrentAppOrientation({orientation:e,locked:!1}),this.updateCurrentPosition({width:this.adFormatContainer.width,height:this.adFormatContainer.height,x:this.adFormatContainer.element.offsetLeft,y:this.adFormatContainer.element.offsetTop})}sendExpandState(){this.updateState(Qn.EXPANDED),this.updateCurrentPosition({x:0,y:0,width:this.adFormatContainer.width,height:this.adFormatContainer.height}),this.updateMaxSize({width:this.adFormatContainer.width,height:this.adFormatContainer.height})}resizeToDefaultPosition(){this.updateState(Qn.DEFAULT),this.updateCurrentPosition({height:this.adFormatContainer.height,width:this.adFormatContainer.width,x:this.adFormatContainer.element.offsetLeft,y:this.adFormatContainer.element.offsetTop}),this.updateMaxSize({width:this.adFormatContainer.width,height:this.adFormatContainer.height})}updateAudioVolume(e){this.ogySdkMraidGateway.updateAudioVolume(e)}updateExposure(e){this.ogySdkMraidGateway.updateExposure({exposedPercentage:e})}updateState(e){this.ogySdkMraidGateway.updateState(e)}updateScreenSize(e){this.ogySdkMraidGateway.updateScreenSize(e)}updateMaxSize(e){this.ogySdkMraidGateway.updateMaxSize(e)}updateSupportFlags(){this.ogySdkMraidGateway.updateSupportFlags({sms:!1,tel:!1,calendar:!1,storePicture:!1,inlineVideo:!1,vpaid:!1,location:!1})}updatePlacementType(){this.ogySdkMraidGateway.updatePlacementType("inline")}updateViewability(e){this.ogySdkMraidGateway.updateViewability(e)}updateOrientationProperties(e){this.ogySdkMraidGateway.updateOrientationProperties(e)}updateCurrentAppOrientation(e){this.ogySdkMraidGateway.updateCurrentAppOrientation(e)}updateExpandProperties(e){this.ogySdkMraidGateway.updateExpandProperties(e)}updateResizeProperties(e){this.ogySdkMraidGateway.updateResizeProperties(e)}updateCurrentPosition(e){this.ogySdkMraidGateway.updateCurrentPosition(e)}updateDefaultPosition(e){this.ogySdkMraidGateway.updateDefaultPosition(e)}resize(){this.updateResizeProperties({width:this.adFormatContainer.width,height:this.adFormatContainer.height,offsetX:this.adFormatContainer.element.offsetLeft,offsetY:this.adFormatContainer.element.offsetTop,customClosePosition:"",allowOffscreen:!0}),this.updateState(Qn.RESIZED)}playVideo(){this.ogySdkMraidGateway.dispatchVideoControl("play")}}class ai{constructor(e,t,n){this.handlerCallTag=this._handlerCallTag.bind(this),this.loaderHandlers=n,this.rootFrame=t,this.adFormatContainer=e,this.mraidScript=this.createMraidScript(),this.mraidSender=new ri(this.adFormatContainer),this.mraidHandlers=new oi(this.adFormatContainer,this.rootFrame,this.mraidSender,n),this.setMraidHandlersMap()}initMraidEnvSetupTimeout(){this.mraidEnvSetupTimeout=setInterval(this.setupMraidEnv.bind(this),100)}setupMraidEnv(){this.rootFrame.element.contentWindow.MRAID_ENV&&(Object.assign(this.rootFrame.element.contentWindow.MRAID_ENV,{sdk:"presage",sdkVersion:C.get("6.0.7")}),clearInterval(this.mraidEnvSetupTimeout))}createMraidScript(){const e=document.createElement("script");return e.src=C.get("https://mraid.presage.io/9d7f0c1/mraid.js"),e.onerror=()=>this.loaderHandlers.onRenderingError(new S(t.MRAID_REQUEST_FAILED,o.RENDERING_ERROR,g.REQUEST_FAILED_DESCRIPTION)),e}write(e){this.writeMraidEventListenerOnFrame(),this.writeMwebFlagOnFrame(),this.writeAdUnitConfigParamsOnFrame(e),this.writeMraidOnFrame(),this.disableFormatTrackingIfNeeded()}writeMwebFlagOnFrame(){this.rootFrame.element.contentWindow.OGYClientMRAIDWeb={mwebFlag:!0}}writeAdUnitConfigParamsOnFrame(e){this.rootFrame.element.contentWindow.OG_AD_UNIT_CONFIG=e}writeMraidEventListenerOnFrame(){this.rootFrame.element.contentWindow.addEventListener("calltag",this.handlerCallTag)}disableFormatTrackingIfNeeded(){this.rootFrame.element.contentWindow.isOgyPreview=window.OG_CONTEXT.og_tracking_disabled}removeListeners(){var e;try{null===(e=this.rootFrame.element.contentWindow)||void 0===e||e.removeEventListener("calltag",this.handlerCallTag)}catch(e){R.error(e instanceof Error?e.message:e.toString())}clearInterval(this.mraidEnvSetupTimeout)}writeMraidOnFrame(){this.rootFrame.element.contentDocument.body.appendChild(this.mraidScript)}_handlerCallTag(e){if(!this.mraidHandlersMap.has(e.detail.method))return R.warning("Method not recognized : "+e.detail.method);this.mraidHandlersMap.get(e.detail.method).call(this.mraidHandlers,e.detail.args)}setMraidHandlersMap(){this.mraidHandlersMap=(new Map).set("expand",this.mraidHandlers.expand).set("close",this.mraidHandlers.close).set("open",this.mraidHandlers.open).set("useCustomClose",this.mraidHandlers.useCustomClose).set("ogyForceClose",this.mraidHandlers.ogyForceClose).set("bunaZiua",this.mraidHandlers.bunaZiua).set("unload",this.mraidHandlers.unload).set("ogyVideoAutoplayError",this.mraidHandlers.ogyVideoAutoplayError).set("ogyOnAdImpression",this.mraidHandlers.ogyOnAdImpression)}}class di{constructor(){this.element=this.create(),this.loadEventPromise=new Promise(((e,t)=>{const n=setTimeout((()=>t()),1e4);this.element.addEventListener("load",(()=>{clearTimeout(n),e()}),{passive:!0})})),this.applyStyle()}create(){return document.createElement("iframe")}applyStyle(){this.element.style.width="100%",this.element.style.height="100%",this.element.frameBorder="0",this.element.marginHeight="0",this.element.style.margin="0",this.element.style.padding="0",this.element.scrolling="no",this.element.style.border="0",this.element.style.overflow="hidden",this.element.style.display="block",this.element.style.background="transparent",this.element.id="myiframe"}appendScript(e,n=!1){return R.info("appendScript"),this.loadEventPromise.then((()=>this.appendScriptOnFrameReady(e,n))).catch((()=>{throw new S(t.FRAME_NOT_READY,o.RENDERING_ERROR,g.FRAME_NOT_READY_DESCRIPTION)}))}addHeavyAdListener(){return new Promise(((e,t)=>{if(void 0===this.element.contentWindow.ReportingObserver)return t();const n=()=>{this.reportingEvent(n,i.takeRecords(),e,t)},i=new this.element.contentWindow.ReportingObserver((t=>this.reportingEvent(n,t,e)),{types:["intervention"],buffered:!0});i.observe(),this.element.contentWindow.addEventListener("unload",n)}))}reportingEvent(e,t,n,i){const s=t.filter((e=>e.body.id&&"HeavyAdIntervention"===e.body.id));s.length>0?(this.element.contentWindow.removeEventListener("unload",e),n(s)):i&&i()}appendScriptOnFrameReady(e,t){const n=t?"head":"body";this.element.contentDocument[n].appendChild(e)}}!function(e){e.AD_LOADED="AD_LOADED",e.AD_NOT_LOADED="AD_NOT_LOADED",e.AD_NO_FILL="AD_NO_FILL",e.AD_ERROR="AD_ERROR",e.AD_DISPLAYED="AD_DISPLAYED"}(Zn||(Zn={})),function(e){e.IMAGE="image",e.VIDEO="video"}(ei||(ei={}));var li,ci,hi,_i,ui=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class pi{constructor(e){this.formatReady=!1,this.expanded=!1,this.adHasBeenOpened=!1,this.visibilityOnLandingEventHandler=this._visibilityOnLandingEvent.bind(this),this.adUnitConfig=e}fireOnAdShowCallback(e){b.getInstance().fireOnAdShowCallback(this.adUnitConfig,e,{media_type:this.bidderResponse.media_type})}init(){this.rootFrame=new di,this.listeners=new si(this,this.rootFrame),this.mraidHelper=new ai(this.adFormatContainer,this.rootFrame,this),this.listeners.run(),this.listeners.addUnloadListener(),this.adFormatContainer.subscribeToExposureChange((e=>this.mraidHelper.mraidSender.updateExposure(e))),this.writeFrame().catch(this.onRenderingError.bind(this)),this.load(),this.initLayout()}writeFrame(){return this.rootFrame.loadEventPromise.then((()=>{this.rootFrame.element.contentWindow.document.open(),this.rootFrame.element.contentWindow.document.close(),this.mraidHelper.write(this.adUnitConfig)})).catch((()=>{throw new S(t.FRAME_NOT_READY,o.RENDERING_ERROR,g.FRAME_NOT_READY_DESCRIPTION)}))}onRenderingError(e){throw this.destroy(),this.clearContainer(),e}handleMediaType(){this.bidderResponse.hasOwnProperty("media_type")&&this.bidderResponse.media_type===ei.IMAGE?this.listeners.addDisplayLoadListener():this.listeners.addVideoLoadListener()}onUnload(){this.onRenderingError(new S(t.UNLOAD_FRAME_ERROR,o.RENDERING_ERROR,g.UNLOAD_FRAME_ERROR_DESCRIPTION))}sendSmartBannerIOSEventIfNeeded(){O.isSmartBannerIOSPresent()&&O.isSafariBrowser(navigator)&&L.postKeepAliveEvent(s.SMART_BANNER_IOS)}sendNotResponsiveEventIfNeeded(){const e=this.getFormatResponsivenessMarginPx();O.getClientWidth()+e<O.getWindow().document.documentElement.scrollWidth&&L.postKeepAliveEvent(s.NOT_RESPONSIVE)}onFormatDisplayed(){this.listeners.addVisibilityChangeListener(),window.OG_CONTEXT.og_ad_status=Zn.AD_DISPLAYED;const e=P(D.SHOWN,this.bidderResponse,this.adUnitConfig.ad_unit_id);(new w).send(e),this.sendDisplayLogAndEvent(),this.sendSmartBannerIOSEventIfNeeded(),this.sendNotResponsiveEventIfNeeded()}writeOmidIfInBidderResponse(){if(this.bidderResponse.is_omid_compliant){const e=document.createElement("script");e.type="text/javascript",e.src=C.get("https://resources.presage.io/v3.92.60-815a93f7/assets/omsdk-js/omwebsdk.js"),this.rootFrame.appendScript(e,!0).catch(this.onRenderingError.bind(this))}}writeAdScript(){const e=document.createElement("script");e.type="text/javascript",this.bidderResponse.ad_content.startsWith("https://")||this.bidderResponse.ad_content.startsWith("http://")?e.src=this.bidderResponse.ad_content:e.innerHTML=this.bidderResponse.ad_content,e.onerror=this.onRenderingError.bind(this,new S(t.CREATIVE_REQUEST_FAILED,o.RENDERING_ERROR,g.REQUEST_FAILED_DESCRIPTION)),this.rootFrame.appendScript(e).catch(this.onRenderingError.bind(this))}handleHeavyAd(e){this.rootFrame.loadEventPromise.then((()=>this.rootFrame.addHeavyAdListener().then((n=>{this.destroy();const i=Object.assign(Object.assign({e_campaign_id:e.campaign_id},e.creative_id&&{e_creative_id:e.creative_id}),{video_event:"heavy_ad_intervention",advertiser_id:e.advertiser_id,e_advert_id:e.advert_id,app_ssp:"ogury"}),s=new URL(C.get("https://ms-ads-monitoring-events.presage.io")+"/video");s.search=new URLSearchParams(i).toString();const r={url:s.toString(),method:"GET"};(new T).send(r),L.handleEvent(o.RENDERING_ERROR,{error_type:t.HEAVY_AD_INTERVENTION,error_content:JSON.stringify(n)})})).catch((()=>R.debug("addHeavyAdListener rejection"))))).catch((()=>R.debug("loadEventPromise rejection")))}destroy(){this.listeners.removeListeners(),this.mraidHelper.removeListeners()}setBidderResponse(e){this.bidderResponse=e}onMraidReady(){this.mraidHelper.initMraidEnvSetupTimeout()}onFormatReady(){this.adFormatContainer.setVisibility(!0),this.formatReady=!0}isFormatReady(){return this.formatReady}onChangeOrientation(){this.mraidHelper.mraidSender.sendUpdateOrientationState()}onFinalClose(){b.getInstance().fireOnAdCompleteCallback(this.adUnitConfig,{media_type:this.bidderResponse.media_type}),this.destroy()}onHiddenWindow(){this.mraidHelper.mraidSender.sendViewabilityState(!1)}onViewableWindow(){this.mraidHelper.mraidSender.sendViewabilityState(!0)}onOpen(e){this.adHasBeenOpened=!0,this.expanded&&this.onCollapse(),"%%CLICK_URL_UNESC%%"===this.adUnitConfig.click_url?L.handleEvent(o.CLICK_URL_MACRO_ERROR):this.adUnitConfig.click_url&&(e=this.adUnitConfig.click_url+encodeURIComponent(e));const t=O.getTimeSpentOnPage();L.postKeepAliveEvent(i.AD_CLICK,{details:t&&O.serializeJSON(t)}),document.addEventListener("visibilitychange",this.visibilityOnLandingEventHandler,{passive:!0}),O.getWindow().open(e)}_visibilityOnLandingEvent(){if("visible"===document.visibilityState){const e=O.getTimeSpentOnPage();L.postKeepAliveEvent(i.VISIBILITY_CHANGE_VISIBLE,{details:e&&O.serializeJSON(e)}),document.removeEventListener("visibilitychange",this.visibilityOnLandingEventHandler)}}onClose(){if(!this.expanded)return this.mraidHelper.mraidHandlers.ogyForceClose();this.onCollapse(),this.mraidHelper.mraidSender.resizeToDefaultPosition()}clearContainer(){this.adFormatContainer.clear()}}ui([jn(o.RENDERING_ERROR)],pi.prototype,"onRenderingError",null),ui([jn(o.RENDERING_ERROR)],pi.prototype,"onHiddenWindow",null),ui([jn(o.RENDERING_ERROR)],pi.prototype,"onViewableWindow",null),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM_CENTER="BOTTOM_CENTER",e.TOP_CENTER="TOP_CENTER",e.CENTER="CENTER",e.LEFT_CENTER="LEFT_CENTER",e.RIGHT_CENTER="RIGHT_CENTER"}(li||(li={}));class Ei{createElement(e,t){const n=document.createElement("div");return t&&n.classList.add(t),n.id=e,n}setVisibility(e){this.element.style.display=e?"block":"none"}clear(){this.element.remove()}subscribeToExposureChange(e){this.element.addEventListener("transform",(t=>{const n=t.detail.translateX;this.element.style.transform=`translateX(${n}%)`,e(100-n)}))}}class mi extends Ei{constructor(e,t){super(),this.width=e.max_width,this.height=e.max_height,this.adUnitId=t,this.initialWidth=e.max_width,this.initialHeight=e.max_height,this.xMargin=Number.isFinite(e.x_margin)?e.x_margin:mi.DEFAULT_MARGIN,this.yMargin=Number.isFinite(e.y_margin)?e.y_margin:mi.DEFAULT_MARGIN,this.gravity=e.gravity||li.BOTTOM_RIGHT,this.element=this.createElement("ogy-root-container-"+this.adUnitId),this.initGravityMap(),this.applyMinifiedStyle(),this.setVisibility(!1)}applyMarginConditionalStyle(){if(!this.gravityMap.has(this.gravity))return this.gravityMap.get(li.BOTTOM_RIGHT).call(this);this.gravityMap.get(this.gravity).call(this)}applyMinifiedStyle(){this.element.style.width=this.initialWidth+"px",this.element.style.height=this.initialHeight+"px",this.applyMarginConditionalStyle(),this.element.style.position="fixed",this.element.style.background="transparent",this.element.style.zIndex="2147483647"}applyExpandedStyle(){this.element.style.width="100%",this.element.style.height="100%",this.applyFourSideMargins(0,void 0,0,void 0)}setExpanded(){this.applyExpandedStyle(),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}setCollapse(){this.applyMinifiedStyle(),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}resize(e,t){R.info("resize"),this.initialHeight=t,this.initialWidth=e,this.height=t,this.width=e,this.applyMinifiedStyle()}initGravityMap(){this.gravityMap=(new Map).set(li.BOTTOM_LEFT,(()=>this.applyFourSideMargins(this.xMargin,void 0,void 0,this.yMargin))).set(li.BOTTOM_RIGHT,(()=>this.applyFourSideMargins(void 0,this.xMargin,void 0,this.yMargin))).set(li.BOTTOM_CENTER,(()=>this.applyFourSideMargins(this.getMarginXCenter(),void 0,void 0,this.yMargin))).set(li.TOP_LEFT,(()=>this.applyFourSideMargins(this.xMargin,void 0,this.yMargin,void 0))).set(li.TOP_RIGHT,(()=>this.applyFourSideMargins(void 0,this.xMargin,this.yMargin,void 0))).set(li.TOP_CENTER,(()=>this.applyFourSideMargins(this.getMarginXCenter(),void 0,this.yMargin,void 0))).set(li.CENTER,(()=>this.applyFourSideMargins(this.getMarginXCenter(),void 0,this.getMarginYCenter(),void 0))).set(li.LEFT_CENTER,(()=>this.applyFourSideMargins(this.xMargin,void 0,this.getMarginYCenter(),void 0))).set(li.RIGHT_CENTER,(()=>this.applyFourSideMargins(void 0,this.xMargin,this.getMarginYCenter(),void 0)))}getMarginXCenter(){return O.getClientWidth()/2-this.initialWidth/2}getMarginYCenter(){return O.getClientHeight()/2-this.initialHeight/2}applyFourSideMargins(e,t,n,i){this.applySingleSideMargin("left",e),this.applySingleSideMargin("right",t),this.applySingleSideMargin("top",n),this.applySingleSideMargin("bottom",i)}applySingleSideMargin(e,t){void 0===t?this.element.style.removeProperty(e):this.element.style.setProperty(e,t+"px")}clear(){this.setVisibility(!1)}}mi.DEFAULT_MARGIN=20,function(e){e.DEFAULT="DEFAULT",e.EXPANDED="EXPANDED",e.MINIMIZED="MINIMIZED",e.STUCK_MINIMIZED="STUCK_MINIMIZED"}(ci||(ci={}));class gi extends pi{constructor(e){super(e),this.adFormatContainer=new mi(e.params,e.ad_unit_id)}hasForcedGravityByCampaignIds(){return C.get('{"127073": "RIGHT_CENTER", "127072": "RIGHT_CENTER", "127071": "RIGHT_CENTER", "127070": "LEFT_CENTER", "127069": "LEFT_CENTER", "127068": "LEFT_CENTER", "127066": "BOTTOM_CENTER", "127065": "BOTTOM_CENTER", "127063": "BOTTOM_CENTER"}')&&C.get('{"127073": "RIGHT_CENTER", "127072": "RIGHT_CENTER", "127071": "RIGHT_CENTER", "127070": "LEFT_CENTER", "127069": "LEFT_CENTER", "127068": "LEFT_CENTER", "127066": "BOTTOM_CENTER", "127065": "BOTTOM_CENTER", "127063": "BOTTOM_CENTER"}')[this.bidderResponse.campaign_id]}initLayout(){ii.appendOnElement(this.adFormatContainer.element,this.rootFrame.element),ii.appendOnTop(this.adFormatContainer.element)}load(){R.info("Received Ad Response."),this.writeOmidIfInBidderResponse(),this.handleHeavyAd(this.bidderResponse),this.writeAdScript(),this.bidderResponse.height&&this.bidderResponse.width&&this.adFormatContainer.resize(this.bidderResponse.width,this.bidderResponse.height),this.handleMediaType()}sendDisplayLogAndEvent(){this.fireOnAdShowCallback(ci.DEFAULT);const e=O.getTimeSpentOnPage(),t=Object.assign(Object.assign({},this.adUnitConfig.params),e&&Object.assign({},e));L.postKeepAliveEvent(i.AD_DISPLAYED,{details:O.serializeJSON(t)}),R.info("Displaying Ad")}getFormatResponsivenessMarginPx(){return 10}destroy(){super.destroy(),this.adFormatContainer.clear(),clearInterval(this.timeoutIdOverlapping)}onFormatReady(){super.onFormatReady(),this.hasForcedGravityByCampaignIds()&&(this.adFormatContainer.gravity=C.get('{"127073": "RIGHT_CENTER", "127072": "RIGHT_CENTER", "127071": "RIGHT_CENTER", "127070": "LEFT_CENTER", "127069": "LEFT_CENTER", "127068": "LEFT_CENTER", "127066": "BOTTOM_CENTER", "127065": "BOTTOM_CENTER", "127063": "BOTTOM_CENTER"}')[this.bidderResponse.campaign_id],this.adFormatContainer.applyMarginConditionalStyle()),this.initOverlappingDetection()}onHidden(){}onShowed(){}onPlay(){}onPause(){}onExpand(){this.expanded=!0,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.EXPANDED),this.adFormatContainer.setExpanded()}onCollapse(){this.expanded=!1,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.DEFAULT),this.adFormatContainer.setCollapse()}initOverlappingDetection(){this.timeoutIdOverlapping||(this.timeoutIdOverlapping=setInterval(this.checkOverlapping.bind(this),500),this.checkOverlapping())}checkOverlapping(){const e=this.adFormatContainer.element.getBoundingClientRect();if(!e)return;const t=[{x:e.left,y:e.top},{x:e.right-1,y:e.top},{x:e.left,y:e.bottom-1},{x:e.right-1,y:e.bottom-1}].map((e=>{var t,n;return null===(n=(t=O.getWindow().document).elementFromPoint)||void 0===n?void 0:n.call(t,e.x,e.y)})).find((e=>e&&!this.adFormatContainer.element.contains(e)));t&&(clearInterval(this.timeoutIdOverlapping),L.postKeepAliveEvent(s.OVERLAPPING_ERROR,{details:JSON.stringify({id:t.id,className:t.className})}))}}class fi{constructor(){this.defaultStyle=this.createStyle()}setDefaultStyle(){return this.defaultStyle.appendChild(document.createTextNode("\n        .ogy-footer-ad {\n            background-color: #1F1F1F;\n            bottom: 0px;\n            position: fixed;\n            width: 100%;\n            z-index: 2147483647;\n            left: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 25vh;\n            min-height: 80px;\n            max-height: 100px;\n            transition: transform 0.4s ease-out;\n            transition-property: transform;\n            transform: translateY(100px);\n        }\n        .ogy-footer-ad.__animated {\n            transform: translateY(0px);\n        }\n        .ogy-footer-ad.__transition-removed {\n            transition: none;\n        }\n        .ogy-footer-ad.__expanded {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0!important;\n            max-height: none;\n            transform: none;\n            transition: none;\n        }\n        .ogy-footer-ad.--hidden {\n            z-index: auto;\n            visibility: hidden;\n        }\n        .ogy-footer-ad.--background {\n            z-index: auto;\n        }\n        ")),this}clear(){this.defaultStyle.remove()}createStyle(){const e=document.createElement("style");return ii.appendOnTopHead(e),e}}class Si{constructor(){this.setStyle(),this.divElement=this.createElement()}createElement(){const e=document.createElement("div");e.setAttribute("class","ogy-spinner-container");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("class","ogy-spinner"),t.setAttribute("width","50px"),t.setAttribute("height","50px"),t.setAttribute("viewBox","0 0 50 50");const n=this.getInnerCircle();return t.appendChild(n),e.appendChild(t),e}getInnerCircle(){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.setAttribute("class","ogy-circle"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","5"),e.setAttribute("stroke-linecap","round"),e.setAttribute("cx","25"),e.setAttribute("cy","25"),e.setAttribute("r","22.5"),e}setStyle(){const e=document.createElement("style");ii.appendOnTopHead(e);e.appendChild(document.createTextNode("\n            .ogy-spinner-container {\n                position: absolute;\n                width: 50px;\n                height: 50px;\n            }\n            .ogy-spinner {\n                position: absolute;\n                animation: rotation 1.35s linear infinite;\n                stroke:#FFFFFF;\n            }\n            @keyframes rotation {\n                0% {\n                    transform: rotate(0deg);\n                }\n\n                100% {\n                    transform: rotate(270deg);\n                }\n            }\n            .ogy-spinner .ogy-circle {\n                stroke-dasharray: 180;\n                stroke-dashoffset: 0;\n                transform-origin: center;\n                animation: turn 1.35s ease-in-out infinite;\n            }\n            @keyframes turn {\n                0% {\n                    stroke-dashoffset: 180;\n                }\n\n                50% {\n                    stroke-dashoffset: 45;\n                    transform: rotate(135deg);\n                }\n\n                100% {\n                    stroke-dashoffset: 180;\n                    transform: rotate(450deg);\n                }\n            }"))}}class Ri extends Ei{constructor(e){super(),this.footerAdConfigParams=e,this.footerAdContainerStyle=this.initContainerStyle(),this.setContainerStyle(),this.element=this.createElement("ogyFooterAd","ogy-footer-ad"),this.loaderElement=(new Si).divElement,ii.appendOnElement(this.element,this.loaderElement),this.setVisibility(!1)}setExpanded(){this.element.classList.add("__transition-removed"),this.element.classList.add("__expanded"),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}setCollapse(){this.element.classList.remove("__transition-removed"),this.element.classList.remove("__expanded"),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}onAdFormatContainerClose(){this.clear()}clear(){this.footerAdContainerStyle.clear(),super.clear()}setVisibility(e){if(e)return this.element.classList.remove("--hidden");this.element.classList.add("--hidden")}foreground(){this.element.classList.remove("--background")}background(){this.element.classList.add("--background")}animate(){this.element.classList.add("__animated")}animatedClose(){this.element.classList.remove("__animated")}initContainerStyle(){return new fi}setContainerStyle(){this.footerAdContainerStyle=this.footerAdContainerStyle.setDefaultStyle()}}class yi{constructor(){this.setStyle(),this.divElement=this.createElement()}createElement(){const e=document.createElement("div");e.setAttribute("class","play-button-container");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","60px"),t.setAttribute("height","60px");const n=this.createInnerCircle(),i=this.createOuterCircle(),s=this.createDefaultCircle(),o=this.createPlayButton();return t.appendChild(s),t.appendChild(n),t.appendChild(i),e.appendChild(t),e.appendChild(o),e}createInnerCircle(){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.setAttribute("class","ogy-play-circle ogy-play-light"),e.setAttribute("cx","30"),e.setAttribute("cy","30"),e.setAttribute("r","30"),e.setAttribute("stroke","#3F3F3F"),e.setAttribute("fill","#3F3F3F"),e}createOuterCircle(){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.setAttribute("class","ogy-play-circle ogy-play-dark"),e.setAttribute("cx","30"),e.setAttribute("cy","30"),e.setAttribute("r","30"),e.setAttribute("stroke","#0D0D0D"),e.setAttribute("fill","#0D0D0D"),e}createDefaultCircle(){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.setAttribute("class","ogy-play-circle ogy-play-default"),e.setAttribute("cx","30"),e.setAttribute("cy","30"),e.setAttribute("r","30"),e.setAttribute("stroke","#3F3F3F"),e.setAttribute("fill","#3F3F3F"),e}createPlayButton(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("style","position: absolute;"),e.setAttribute("width","18"),e.setAttribute("height","22"),e.setAttribute("viewBox","0 0 18 22"),e.setAttribute("fill","none");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("fill","white"),t.setAttributeNS(void 0,"d","M17.1855 12.4835L2.8748 21.692C1.66083 22.4956 0 21.6304 0 20.2086V1.79116C0 0.369789 1.66095 -0.495462 2.8748 0.307763L17.1855 9.51661C18.2715 10.1965 18.2715 11.8037 17.1855 12.4835Z"),e.appendChild(t),e}setStyle(){const e=document.createElement("style");ii.appendOnTopHead(e);e.appendChild(document.createTextNode("\n            .play-button-container {\n                position: absolute;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n            .ogy-play-circle {\n                transform-origin: center;\n            }\n            .ogy-play-circle.ogy-play-dark {\n                animation:2.5s pulseAnimation cubic-bezier(0.33, 1, 0.68, 1) infinite, 2.5s opacityAnimation cubic-bezier(0.33, 1, 0.68, 1) infinite;\n                animation-delay: 0s;\n            }\n            .ogy-play-circle.ogy-play-light {\n                animation:2.5s pulseAnimation cubic-bezier(0.33, 1, 0.68, 1) infinite;\n                animation-delay: 2s;\n            }\n            .ogy-play-circle.ogy-play-light-2 {\n                animation:2.5s pulseAnimation cubic-bezier(0.33, 1, 0.68, 1) infinite;\n                animation-delay: 0.5s;\n            }\n            @keyframes pulseAnimation {\n                0%{\n                    transform:scale(0.33);\n                }\n                25%, 100% {\n                    transform:scale(1);\n                }\n            }\n            @keyframes opacityAnimation {\n                0%, 40% {\n                    opacity:1;\n                }\n                100%{\n                    opacity:0;\n                }\n            }"))}}class Oi extends pi{sendDisplayLogAndEvent(){var e;R.info("Displaying Ad"),null===(e=this.adFormatContainer.loaderElement)||void 0===e||e.remove(),this.fireOnAdShowCallback(this.adFormatContainer.adFormatState);const t=O.getTimeSpentOnPage(),n=Object.assign(Object.assign({},this.adUnitConfig.params),t&&Object.assign({},t));L.postKeepAliveEvent(i.AD_DISPLAYED,{details:O.serializeJSON(n)})}getFormatResponsivenessMarginPx(){return 1}destroy(){super.destroy(),this.expanded||this.adHasBeenOpened?this.adFormatContainer.clear():this.adFormatContainer.onAdFormatContainerClose()}}class Ci{static createAdSlotElementIfNeeded(e){return!this.isAdSlotPresentAndValid(e)&&(this.createAdSlotElement(e),!0)}static isAdSlotPresentAndValid(e){return!!(ii.isAdSlotSelectorExists(e.ad_slot_selector)&&ii.isAdSlotAndParentVisible(e.ad_slot_selector)&&ii.isQuerySelectorAboveTheFold(e.ad_slot_selector,O.getWindow().scrollY)&&ii.isStickyElement(O.getWindow().document.querySelector(e.ad_slot_selector)))}static createAdSlotElement(e){const t="ogy-ad-slot";e.ad_slot_selector="#ogy-ad-slot";const n=document.createElement("div");n.style.width="0px",n.style.height="100px",n.style.position="fixed",n.style.bottom="0",n.style.zIndex="2147483647",n.style.setProperty("transform","translateY(100px)"),n.id=t,O.getWindow().document.body.appendChild(n)}}class vi{constructor(e){this.adSlotSelector=e,this.adSlotNode=ii.getElementByQuerySelector(this.adSlotSelector),this.initialHeight=this.adSlotNode.getBoundingClientRect().height,this.styleElement=this.createStyle(),this.setDefaultStyle(),this.setPortraitMode(),this.setLandscapeMode(),this.position=this.getCurrentPosition()}listenPositionChanged(e){this.mutationObserver=new MutationObserver((t=>{t.forEach((()=>{const t=this.getCurrentPosition();t!==this.position&&(this.position=t,e())}))})),this.mutationObserver.observe(this.adSlotNode,{attributes:!0})}applyStyle(){this.adSlotNode.classList.add("ogy_ad_slot_element","ogy_ad_slot_element--force-style")}minimize(){this.adSlotNode.classList.add("ogy_ad_slot_element--minimized")}optimize(){this.adSlotNode.classList.remove("ogy_ad_slot_element--minimized")}foreground(){this.handleStickyAdSlot()}background(){this.adSlotNode.classList.remove("ogy_ad_slot_element--force-index")}addFooterAdDefaultAnimation(){this.adSlotNode.classList.add("ogy_ad_slot_element--animated-footer-ad")}close(){this.adSlotNode.classList.remove("ogy_ad_slot_element--minimized","ogy_ad_slot_element--force-style","ogy_ad_slot_element--sticky","ogy_ad_slot_element--force-index"),O.waitForEvent(this.adSlotNode,"transitionend").then(this.clear.bind(this))}clear(){var e;this.styleElement.remove(),this.adSlotNode.classList.remove("ogy_ad_slot_element--close","ogy_ad_slot_element--minimized","ogy_ad_slot_element","ogy_ad_slot_element--sticky","ogy_ad_slot_element--force-index","ogy_ad_slot_element--force-style","ogy_ad_slot_element--animated-footer-ad"),null===(e=this.mutationObserver)||void 0===e||e.disconnect()}hasPositionForHandlingContentShift(){return this.isSticky()||"absolute"===this.position}isSticky(){return"fixed"===this.position}getCurrentPosition(){return O.getWindow().getComputedStyle(this.adSlotNode).position}handleStickyAdSlot(){this.isSticky()&&this.adSlotNode.classList.add("ogy_ad_slot_element--sticky","ogy_ad_slot_element--force-index")}updateFixedElementStyle(e){e!==this.currentTopPosition&&(this.fixedElementStyle.nodeValue=`\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--sticky {\n            position: fixed!important;\n            top: ${e}px!important;\n            left: 0px!important;\n        }\n        `,this.currentTopPosition=e)}listenOnTransitionEnd(){return O.waitForEvent(this.adSlotNode,"transitionend")}createStyle(){const e=document.createElement("style");return ii.appendOnTopHead(e),e}setDefaultStyle(){const e=`\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--force-style.ogy_ad_slot_element--minimized {\n            height: 100px!important;\n            min-height: 100px!important;\n        }\n        ${this.adSlotSelector}.ogy_ad_slot_element {\n            display: block;\n            transition: all 0.4s ease-out;\n            transition-property: width, height, margin, padding, min-width, min-height;\n            box-sizing: border-box;\n        }\n\n        ${this.adSlotSelector}.ogy_ad_slot_element::before {\n            display: none!important;\n        }\n\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--force-style {\n            margin-left: calc(50% - 50vw)!important;\n            margin-right: calc(50% - 50vw)!important;\n            width: auto!important;\n            min-width: 100%!important;\n            padding: 0!important;\n            left: 0px!important;\n            animation: none!important;\n            transform: none!important;\n            overflow: hidden!important;\n        }\n\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--force-style.ogy_ad_slot_element--animated-footer-ad {\n            top: unset;\n            bottom: 0px !important;\n        }\n\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--force-index {\n            z-index: 2147483647!important;\n        }\n        `,t=`\n        ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--sticky {\n            position: fixed!important;\n        }\n        `;this.fixedElementStyle=document.createTextNode(t),this.styleElement.appendChild(document.createTextNode(e)),this.styleElement.appendChild(this.fixedElementStyle)}setPortraitMode(){this.setCommonOrientationStyle("56.25vw","portrait")}setLandscapeMode(){this.setCommonOrientationStyle("25vh","landscape")}setCommonOrientationStyle(e,t){const n=`\n        @media (orientation: ${t}) {\n            ${this.adSlotSelector}.ogy_ad_slot_element.ogy_ad_slot_element--force-style {\n                height: ${e}!important;\n                max-height: ${e}!important;\n                min-height: ${e}!important;\n            }\n        }\n        `;this.styleElement.appendChild(document.createTextNode(n))}}class Ti extends Oi{constructor(e){super(e),this.isAdSlotGenerated=!0,this.isAdSlotGenerated=Ci.createAdSlotElementIfNeeded(e.params),this.adFormatContainer=this.initAdFormatContainer()}initLayout(){ii.appendFirstOnElement(this.adSlotElement.adSlotNode,this.adFormatContainer.element),ii.appendOnElement(this.adFormatContainer.element,this.rootFrame.element),this.adFormatContainer.animate()}load(){R.info("Received Ad Response."),this.writeOmidIfInBidderResponse(),this.handleMediaType(),this.adSlotElement=new vi(this.adUnitConfig.params.ad_slot_selector),this.adSlotElement.handleStickyAdSlot(),this.adFormatContainer.setVisibility(!0),this.adFormatContainer.adFormatState=ci.DEFAULT,this.adSlotElement.applyStyle(),this.adSlotElement.minimize(),this.adSlotElement.listenOnTransitionEnd().then((()=>{this.handleHeavyAd(this.bidderResponse),this.writeAdScript()})),this.adSlotElement.addFooterAdDefaultAnimation()}destroy(){if(this.isAdSlotGenerated?this.adSlotElement.listenOnTransitionEnd().then((()=>this.adSlotElement.close())):this.adSlotElement.close(),this.expanded)return super.destroy();O.waitForEvent(this.adFormatContainer.element,"transitionend").then((()=>super.destroy())),this.adFormatContainer.animatedClose()}onHidden(){this.adFormatContainer.setVisibility(!1),this.mraidHelper.mraidSender.sendViewabilityState(!1),this.adSlotElement.background()}onShowed(){this.adFormatContainer.setVisibility(!0),this.mraidHelper.mraidSender.sendViewabilityState(!0),this.adSlotElement.foreground()}onPlay(){this.adSlotElement.foreground(),this.adFormatContainer.foreground(),this.mraidHelper.mraidSender.sendViewabilityState(!0)}onPause(){this.adSlotElement.background(),this.adFormatContainer.background(),this.mraidHelper.mraidSender.sendViewabilityState(!1)}onAutoPlayError(){var e;null===(e=this.adFormatContainer.loaderElement)||void 0===e||e.remove(),this.autoPlayLoadingButton=(new yi).divElement,ii.appendOnElement(this.adFormatContainer.element,this.autoPlayLoadingButton)}onAutoPlayTouchStart(){var e;null===(e=this.autoPlayLoadingButton)||void 0===e||e.remove()}onExpand(){this.expanded=!0,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.EXPANDED),this.adFormatContainer.setExpanded()}onCollapse(){this.expanded=!1,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,this.adFormatContainer.adFormatState),this.adFormatContainer.setCollapse()}clearContainer(){super.clearContainer(),this.adSlotElement.clear()}initAdFormatContainer(){return new Ri(this.adUnitConfig.params)}}!function(e){e.BELOW_HEADER="BELOW_HEADER",e.ABOVE_HEADER="ABOVE_HEADER"}(hi||(hi={})),function(e){e.STICKY="STICKY",e.NON_STICKY="NON_STICKY",e.AUTO="AUTO"}(_i||(_i={}));class Ni{static isValidHeaderParams(e){return Ni.isHeaderSelectorDefined(e)&&Ni.isHeaderSelectorExists(e)}static checkPublisherHeader(e){this.isValidHeaderParams(e)||this.createHeaderElement(e)}static isAdSlotPresentAndValid(e,t){return!!e.ad_slot_selector&&(e.ad_slot_selector&&!ii.getElementByQuerySelector(e.ad_slot_selector)?(R.warning("AdSlotSelector has not been found : ",e.ad_slot_selector),!1):!(!ii.isAdSlotAndParentVisible(e.ad_slot_selector)||!ii.isQuerySelectorAboveTheFold(e.ad_slot_selector,t)))}static createHeaderElement(e){const t="ogy-header";e.header_selector="#ogy-header";const n=document.createElement("div");n.style.width="0px",n.style.height="0px",n.style.position="fixed",n.style.top="0",n.style.display="none",n.id=t,O.getWindow().document.body.firstChild.before(n)}static isHeaderSelectorDefined(e){return!!e.header_selector||(L.postKeepAliveEvent(s.UNSPECIFIED_HEADER_SELECTOR),!1)}static isHeaderSelectorExists(e){return!!ii.getElementByQuerySelector(e.header_selector)||(L.postKeepAliveEvent(s.HEADER_SELECTOR_NOT_FOUND,{details:JSON.stringify({querySelector:e.header_selector})}),!1)}}class Ai{constructor(e){if(this.onScrollHandler=this._onScrollHandler.bind(this),this._lastScrollYValue=0,this.addEventListenerOptions={passive:!0},this.element=O.getWindow(),!e)return;const t=ii.getElementByQuerySelector(e);if(!t)return L.postKeepAliveEvent(s.SCROLL_CONTENT_SELECTOR_NOT_FOUND),void R.warning(`scroll content selector ${e} does not exist on the DOM`);this.element=t}get lastScrollY(){return this._lastScrollYValue}set lastScrollY(e){this._lastScrollYValue=e}get currentScrollY(){return Number.isInteger(this.element.scrollTop)?this.element.scrollTop:this.element.scrollY}addWindowScrollListener(e){this.onScroll=e,this.element.addEventListener("scroll",this.onScrollHandler,this.addEventListenerOptions)}removeWindowScrollListener(){this.element.removeEventListener("scroll",this.onScrollHandler)}_onScrollHandler(){this.intersectionEventTicking||(this.intersectionEventTicking=!0,O.getWindow().requestAnimationFrame((()=>{this.intersectionEventTicking=!1,this.onScroll(),this.lastScrollY=this.currentScrollY})))}}class Di{constructor(e,t,n,i,s){this.adSlotElement=e,this.adContainerHeight=t,this.headerSelector=n,this.isStickyHeader=i,this.domPosition=s}destroy(){this.spaceContentDiv.remove(),this.spaceContentStyle.remove()}init(){this.handleStickyAdSlotSelector()}handleStickyAdSlotSelector(){this.createSpaceContentDiv(),this.handleSpacing(this.adContainerHeight)}createSpaceContentDiv(){this.spaceContentDiv=document.createElement("div"),this.spaceContentDiv.id="handle-movement",this.spaceContentStyle=document.createElement("style"),this.spaceContentStyle.textContent="\n            #handle-movement {\n                margin-bottom: 0px;\n                height: 0px;\n                transition: all 0.4s ease-out;\n            }\n        ",O.getWindow().document.head.appendChild(this.spaceContentStyle),this.isStickyHeader||this.domPosition!==hi.ABOVE_HEADER?ii.appendAfterElement(this.headerSelector,this.spaceContentDiv):ii.appendBeforeElement(this.headerSelector,this.spaceContentDiv)}minimize(){this.handleSpacing(100)}backToDefaultPosition(){this.handleSpacing(this.adContainerHeight)}handleAdSlotHigherThanHeaderAdSpacing(e){const t=this.adSlotElement.initialHeight-e;this.spaceContentDiv.style.marginBottom="-"+t+"px",this.spaceContentDiv.style.height="0px"}handleAdSlotShorterThanHeaderAdSpacing(e){const t=e-this.adSlotElement.initialHeight;this.spaceContentDiv.style.height=t+"px",this.spaceContentDiv.style.marginBottom="0px"}handleSpacing(e){this.adSlotElement.initialHeight>e?this.handleAdSlotHigherThanHeaderAdSpacing(e):this.handleAdSlotShorterThanHeaderAdSpacing(e)}}class Ii{constructor(){this.defaultStyle=this.createStyle(),this.portraitStyle=this.createStyle(),this.landscapeStyle=this.createStyle()}setPortraitStyle(){return this.setCommonOrientationStyle(this.portraitStyle,"56.25vw","portrait"),this}setLandscapeStyle(){return this.setCommonOrientationStyle(this.landscapeStyle,"25vh","landscape"),this}setDefaultStyle(e){const t=`\n        .ogy-header-ad {\n            background-color: #1F1F1F;\n            height: 0;\n            top: ${e}px;\n            position: fixed;\n            width: 100%;\n            z-index: 2147483647;\n            left: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin: 0!important;\n        }\n\n        .ogy-header-ad.--hidden {\n            visibility: hidden;\n        }\n\n        .ogy-header-ad.__expanded {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0!important;\n            max-height: none;\n        }\n        .ogy-header-ad.--top {\n            top: 0;\n        }\n        .ogy-header-ad.--non-sticky {\n            position: unset;\n        }\n        .ogy-header-ad.--non-sticky.__expanded {\n            position: fixed;\n        }\n        .ogy-header-ad.--hidden {\n            z-index: auto;\n            visibility: hidden;\n        }\n        .ogy-header-ad.--background {\n            z-index: auto;\n        }\n\n        .__default-position {\n            animation-duration: 0.4s;\n            animation-name: default-animation;\n            animation-timing-function: ease-out;\n            min-height: 80px;\n        }\n\n        .__default-position.from-minimize {\n            min-height: 80px;\n            animation-name: default-animation-from-minimized;\n        }\n\n        .__minimized {\n            animation-duration: 0.4s;\n            animation-timing-function: ease-out;\n            height: 100px;\n            min-height: 80px;\n            max-height: 100px;\n        }\n\n        .__minimized.from-bottom-animation {\n            min-height: 80px;\n            animation-name: minimized-animation-from-bottom;\n        }\n\n        .__minimized.from-top-animation {\n            min-height: 0px;\n            animation-name: minimized-animation-from-top;\n        }\n\n        .__close {\n            animation-duration: 0.4s;\n            animation-timing-function: ease-out;\n            height: 0px;\n            max-height: 0px;\n            min-height: 0px;\n        }\n        .__default-position.__close {\n            animation-name: close-animation-default;\n        }\n        .__minimized.__close {\n            animation-name: close-animation-minimize;\n        }\n        `;return this.defaultStyle.appendChild(document.createTextNode(t)),this}clear(){this.defaultStyle.remove(),this.landscapeStyle.remove(),this.portraitStyle.remove()}setCommonOrientationStyle(e,t,n){const i=`\n        @media (orientation: ${n}) {\n            .__default-position {\n                height: ${t};\n            }\n\n            .__minimized {\n                height: ${t};\n            }\n\n            @keyframes default-animation {\n                from {\n                    height: 0;\n                    min-height: 0px;\n                }\n                to {\n                    min-height: 80px;\n                    height: ${t};\n                }\n            }\n\n            @keyframes default-animation-from-minimized {\n                from {\n                    height: 100px;\n                }\n                to {\n                    height: ${t};\n                }\n            }\n\n            @keyframes minimized-animation-from-bottom {\n                from {\n                    height: ${t};\n                    max-height: ${t};\n                }\n                to {\n                    height: ${t};\n                    max-height: 100px;\n                }\n            }\n\n            @keyframes close-animation-default {\n                from {\n                    height: ${t};\n                    max-height: ${t};\n                    min-height: ${t};\n                }\n                to {\n                    height: 0px;\n                    max-height: 0px;\n                    min-height: 0px;\n                }\n            }\n\n            @keyframes minimized-animation-from-top {\n                from {\n                    height: 0px;\n                    max-height: 0px;\n                }\n                to {\n                  height: ${t};\n                  max-height: 100px;\n                }\n            }\n    \n            @keyframes close-animation-minimize {\n                from {\n                    height: ${t};\n                    max-height: 100px;\n                    min-height: 80px;\n                }\n                to {\n                    height: 0px;\n                    max-height: 0px;\n                    min-height: 0px;\n                }\n            }\n        }\n        `;e.appendChild(document.createTextNode(i))}createStyle(){const e=document.createElement("style");return ii.appendOnTopHead(e),e}}class bi extends Ei{constructor(e,t,n){super(),this.headerAdConfigParams=e,this.isLandscape=this.isLandscapeMode(),this.height=this.calculateDefaultHeight(),this.clientHeightHeader=n,this.headerAdContainerStyle=this.initContainerStyle(),this.setContainerStyle(),this.element=this.createElement("ogy-root-container-"+t,"ogy-header-ad"),this.loaderElement=(new Si).divElement,ii.appendOnElement(this.element,this.loaderElement),this.setVisibility(!1),this.width=O.getClientWidth()}addClassToElement(...e){this.element.classList.add(...e)}removeClassToElement(...e){this.element.classList.remove(...e)}handleFromMinimizedDefaultAnimation(){this.adFormatState=ci.DEFAULT;return this.removeClassToElement("__minimized","from-top-animation"),this.addClassToElement("from-minimize"),this.listenOnAnimationEnd()}handleInitialDefaultAnimation(){this.adFormatState=ci.DEFAULT,this.addClassToElement("__default-position")}setExpanded(){this.element.classList.add("__expanded"),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}setCollapse(){this.element.classList.remove("__expanded"),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight}minimize(e){return this.adFormatState=ci.MINIMIZED,this.height=O.getMaxHeaderAdHeight(this.height),this.addClassToElement("__minimized"),e?this.addClassToElement("from-bottom-animation"):this.addClassToElement("from-top-animation"),this.listenOnAnimationEnd()}onAdFormatContainerClose(){this.listenOnAnimationEnd().then(this.clear.bind(this)),this.addClassToElement("__close")}listenOnAnimationEnd(){return O.waitForEvent(this.element,"animationend")}clear(){this.headerAdContainerStyle.clear(),super.clear()}setVisibility(e){if(e)return this.removeClassToElement("--hidden");this.addClassToElement("--hidden")}foreground(){this.removeClassToElement("--background")}background(){this.addClassToElement("--background")}calculateDefaultHeight(){return this.isLandscapeMode()?this.getQuarterOfHeight():Math.round(9*O.getClientWidth()/16)}setTopPosition(e){this.element.style.top=`${e}px`}setToFixedHeaderAdStyle(){this.element.classList.remove("--non-sticky")}setToAdSlotStyle(){this.element.classList.add("--non-sticky")}isLandscapeMode(){return Boolean(O.getClientWidth()>O.getClientHeight())}getQuarterOfHeight(){return Math.round(O.getClientHeight()/4)}initContainerStyle(){return new Ii}setContainerStyle(){this.headerAdContainerStyle=this.headerAdContainerStyle.setDefaultStyle(this.clientHeightHeader).setPortraitStyle().setLandscapeStyle()}}class wi{constructor(e){this.headerAdConfigParams=e,this.headerNode=ii.getElementByQuerySelector(e.header_selector),this.headerNode.classList.add("ogy-header"),this.headerHeight=this.headerNode.clientHeight,this.initialTop=O.getWindow().getComputedStyle(this.headerNode).top||"0px",this.styleElement=this.createStyle()}listenPositionChanged(e){this.mutationObserver=new MutationObserver((t=>this.onMutationChange(t,e))),this.mutationObserver.observe(this.headerNode,{attributes:!0,childList:!0})}onMutationChange(e,t){return Promise.all(e.map((e=>Promise.all(e.target.getAnimations({subtree:!0}).map((e=>e.finished))).then(t))))}minimize(){this.headerNode.classList.add("ogy-header--minimized")}backToDefaultPosition(){this.headerNode.classList.remove("ogy-header--minimized")}foreground(){this.headerNode.classList.remove("ogy-header--background")}background(){this.headerNode.classList.add("ogy-header--background")}clear(){this.headerNode.classList.remove("ogy-header","ogy-header--below-ad","ogy-header--minimized","ogy-header--non-sticky","ogy-header--background")}setVisibility(e){if(e)return this.headerNode.classList.remove("ogy-header--background");this.headerNode.classList.add("ogy-header--background")}setBelowAd(){this.headerNode.classList.add("ogy-header--below-ad")}isStickyHeader(){return this.headerAdConfigParams.header_stickiness===_i.STICKY||this.headerAdConfigParams.header_stickiness!==_i.NON_STICKY&&ii.isStickyElement(this.headerNode)}handleNonStickyHeader(){ii.isStickyElement(this.headerNode)&&this.headerNode.classList.contains("ogy-header--non-sticky")?this.headerNode.classList.remove("ogy-header--non-sticky"):ii.isStickyElement(this.headerNode)||this.headerNode.classList.contains("ogy-header--non-sticky")||this.headerNode.classList.add("ogy-header--non-sticky")}createStyle(){const e=document.createElement("style");return ii.appendOnTopHead(e),e}setHeaderStyle(){this.setDefaultStyle(),this.setLandscapeMode(),this.setPortraitMode()}setDefaultStyle(){this.styleElement.appendChild(document.createTextNode("\n    .ogy-header {\n        transition: top 0.4s;\n    }\n    "))}setLandscapeMode(){const e=Math.min(O.getClientWidth(),O.getClientHeight())/4;this.overrideHeader(e,"landscape")}setPortraitMode(){const e=9*Math.min(O.getClientWidth(),O.getClientHeight())/16;this.overrideHeader(e,"portrait")}overrideHeader(e,t){const n=`\n      @media (orientation: ${t}) {\n          .ogy-header--below-ad {\n              top: ${e}px!important;\n          }\n          .ogy-header--below-ad.ogy-header--minimized { top: ${O.getMaxHeaderAdHeight(e)}px!important; }\n          .ogy-header--below-ad.ogy-header--non-sticky, .ogy-header--below-ad.ogy-header--background {\n              top: ${this.initialTop}!important;\n          }\n      }\n      `;this.styleElement.appendChild(document.createTextNode(n))}}class Pi extends Oi{constructor(e){super(e),this.headerElement=this.initHeaderElement(),this.adFormatContainer=this.initAdFormatContainer(),this.adUnitConfig.params.header_stickiness===_i.AUTO&&this.headerElement.listenPositionChanged(this.updateElementPositions.bind(this))}get scrollContentElement(){return this._scrollContentElement}set scrollContentElement(e){this._scrollContentElement=e}get adSlotElement(){return this._adSlotElement}set adSlotElement(e){this._adSlotElement=e}load(){R.info("Received Ad Response."),this.checkAvailableSpace(),this.writeOmidIfInBidderResponse(),this.addMediaTypeListener(),this.adSlotElement.handleStickyAdSlot(),this.adSlotElement.listenPositionChanged(this.onAdSlotPositionChanged.bind(this)),this.adSlotElement.updateFixedElementStyle(this.getYIntersection()),this.handleContentShift(),this.adFormatContainer.setVisibility(!0),this.scrollContentElement.addWindowScrollListener(this.onScroll.bind(this)),this.adFormatContainer.handleInitialDefaultAnimation(),this.handleMinimizeByDefault(),this.adSlotElement.applyStyle(),this.setAdFormatContainerStyle(this.isAdSlotNotFullyVisible()),this.adFormatContainer.listenOnAnimationEnd().then((()=>{this.handleHeavyAd(this.bidderResponse),this.writeAdScript()}))}initLayout(){ii.appendFirstOnElement(this.adSlotElement.adSlotNode,this.adFormatContainer.element),ii.appendOnElement(this.adFormatContainer.element,this.rootFrame.element)}destroy(){var e;super.destroy(),this.adSlotElement.close(),null===(e=this.contentShiftElement)||void 0===e||e.destroy(),this.scrollContentElement.removeWindowScrollListener()}minimize(){this.mraidHelper.mraidSender.resize(),b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.MINIMIZED)}handleResizeToDefaultPosition(){this.mraidHelper.mraidSender.resizeToDefaultPosition(),b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.DEFAULT)}checkAvailableSpace(){const e=ii.getElementByQuerySelector(this.adUnitConfig.params.header_selector);if(!e)return;Math.max(0,O.getElementBottomPosition(e,this.scrollContentElement.currentScrollY))+O.getMaxHeaderAdHeight(this.adFormatContainer.height)>O.getClientHeight()&&(R.warning(g.NO_SPACE_AVAILABLE_DESCRIPTION),L.postKeepAliveEvent(s.ELEMENT_HAS_NO_SPACE))}updateElementPositions(){this.updateAdContainerPosition()}updateAdContainerPosition(){this.adFormatContainer.setTopPosition(this.getYIntersection())}onAutoPlayError(){var e;null===(e=this.adFormatContainer.loaderElement)||void 0===e||e.remove(),this.autoPlayLoadingButton=(new yi).divElement,ii.appendOnElement(this.adFormatContainer.element,this.autoPlayLoadingButton)}onAutoPlayTouchStart(){var e;null===(e=this.autoPlayLoadingButton)||void 0===e||e.remove()}setAdFormatContainerStyle(e){if(e)return this.adFormatContainer.setToFixedHeaderAdStyle();this.adFormatContainer.setToAdSlotStyle()}clearContainer(){var e;super.clearContainer(),this.adSlotElement.clear(),null===(e=this.contentShiftElement)||void 0===e||e.destroy()}createContentShiftElement(){this.contentShiftElement||(this.contentShiftElement=new Di(this.adSlotElement,this.adFormatContainer.calculateDefaultHeight(),this.adUnitConfig.params.header_selector,this.headerElement.isStickyHeader(),this.adUnitConfig.params.header_ad_dom_position),this.contentShiftElement.init())}getYIntersection(){return Math.max(0,O.getElementBottomPosition(this.headerElement.headerNode,this.scrollContentElement.currentScrollY))}onHidden(){this.adSlotElement.background(),this.adFormatContainer.setVisibility(!1),this.mraidHelper.mraidSender.sendViewabilityState(!1)}onShowed(){this.adSlotElement.foreground(),this.adFormatContainer.setVisibility(!0),this.mraidHelper.mraidSender.sendViewabilityState(!0)}onPlay(){this.adSlotElement.foreground(),this.adFormatContainer.foreground(),this.mraidHelper.mraidSender.sendViewabilityState(!0)}onPause(){this.adSlotElement.background(),this.adFormatContainer.background(),this.mraidHelper.mraidSender.sendViewabilityState(!1)}onExpand(){this.expanded=!0,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,ci.EXPANDED),this.adFormatContainer.setExpanded()}onCollapse(){this.expanded=!1,b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,this.adFormatContainer.adFormatState),this.adFormatContainer.setCollapse()}isMinimizedByDefault(){return"boolean"==typeof this.adUnitConfig.params.minimized_by_default&&this.adUnitConfig.params.minimized_by_default}initAdFormatContainer(){return new bi(this.adUnitConfig.params,this.adUnitConfig.ad_unit_id,this.headerElement.headerHeight)}initHeaderElement(){return new wi(this.adUnitConfig.params)}handleMinimizeByDefault(){var e;this.isMinimizedByDefault()&&(this.adFormatContainer.minimize(!1),this.adSlotElement.minimize(),null===(e=this.contentShiftElement)||void 0===e||e.minimize())}isAdSlotNotFullyVisible(){return this.adSlotElement.adSlotNode.getBoundingClientRect().y<this.getYIntersection()||this.adSlotElement.isSticky()}handleContentShift(){var e;if(!this.adSlotElement.hasPositionForHandlingContentShift())return null===(e=this.contentShiftElement)||void 0===e||e.destroy(),void delete this.contentShiftElement;this.createContentShiftElement()}}class Li{constructor(e,t){this.element=e,this.advertId=t}handleClickCustomCloseButton(e){e.stopPropagation(),L.postKeepAliveEvent(i.HEADER_DISPLAY_CUSTOM_CLOSE_CROSS_ON_CLICK,{details:this.advertId}),this.customCloseButtonZone.style.display="none",this.onCustomCloseButtonCallback&&this.onCustomCloseButtonCallback()}addCustomCloseButton(){var e,t;const n=document.createElement("style");n.textContent="\n        /* To Remove after test from [SPY-10534] are finished */\n        #custom-close-button-container {\n            margin: 4px;\n            top: 0;\n            left: 0;\n            position: absolute;\n            border-radius: 4px;\n            z-index: 3;\n        }\n\n        /* To Remove after test from [SPY-10534] are finished */\n        #custom-close-button-zone {\n            height: 16px;\n            width: 16px;\n            padding: 3px;\n            background: rgba(0,0,0,.3);\n            border-radius: 4px;\n            font-size: 0;\n        }",null===(t=null===(e=this.element.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t||t.appendChild(n),this.customCloseButtonContainer=document.createElement("div"),this.customCloseButtonContainer.id="custom-close-button-container",this.customCloseButtonZone=document.createElement("div"),this.customCloseButtonZone.id="custom-close-button-zone",this.customCloseButtonZone.addEventListener("click",this.handleClickCustomCloseButton.bind(this),!0),this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","0 0 16 16"),this.svgElement.setAttribute("width","10"),this.svgElement.setAttribute("height","10"),this.svgElement.setAttribute("style","filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 1px 1px);"),this.svgElement.id="svg-element-id",this.svgPathElement=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svgPathElement.setAttribute("d","M21,6.611,19.389,5,13,11.389,6.611,5,5,6.611,11.389,13,5,19.389,6.611,21,13,14.611,19.389,21,21,19.389,14.611,13Z"),this.svgPathElement.setAttribute("fill","#FFFFFF"),this.svgPathElement.setAttribute("transform","translate(-5,-5)"),this.svgElement.appendChild(this.svgPathElement),this.customCloseButtonZone.appendChild(this.svgElement),this.customCloseButtonContainer.appendChild(this.customCloseButtonZone),this.element.appendChild(this.customCloseButtonContainer)}}class Fi extends Pi{constructor(e){super(e),this.currentAdSlotIsNotFullyVisible=!1}addMediaTypeListener(){this.listeners.addDisplayLoadListener()}onAdSlotPositionChanged(){this.adSlotElement.isSticky()?this.adSlotBecomesSticky():this.adSlotBecomesNonSticky(),this.handleContentShift()}onFormatReady(){if(this.hasForcedHeaderCustomBehaviourByCampaignIds()){const e=new Li(this.adFormatContainer.element,this.bidderResponse.advert_id);e.addCustomCloseButton(),e.onCustomCloseButtonCallback=()=>this.onClose()}super.onFormatReady()}destroy(){super.destroy(),clearTimeout(this.timeoutAfterScrollStop)}onScroll(){this.updateAdContainerPosition(),this.adSlotElement.updateFixedElementStyle(this.getYIntersection());const e=this.isAdSlotNotFullyVisible();e?this.handleScrollForDisplay():this.backToDefaultPosition(),e!==this.currentAdSlotIsNotFullyVisible&&(this.currentAdSlotIsNotFullyVisible=e,this.setAdFormatContainerStyle(e))}onClose(){return this.expanded?(this.onCollapse(),this.mraidHelper.mraidSender.resizeToDefaultPosition()):this.isStuckMinimized||this.isMinimizedByDefault()?this.mraidHelper.mraidHandlers.ogyForceClose():void this.stuckToMinimize()}stuckToMinimize(){var e;this.isStuckMinimized=!0,clearTimeout(this.timeoutAfterScrollStop),this.adSlotElement.minimize(),null===(e=this.contentShiftElement)||void 0===e||e.minimize(),this.adFormatContainer.minimize(!0).then((()=>{this.minimize()})),this.headerElement.minimize()}handleScrollForDisplay(){this.scrollContentElement.currentScrollY>this.scrollContentElement.lastScrollY&&this.minimizeHeaderAd(),this.scrollContentElement.currentScrollY<this.scrollContentElement.lastScrollY&&this.backToDefaultPosition()}minimizeHeaderAd(){this.isAdSlotBottomVisible()||(clearTimeout(this.timeoutAfterScrollStop),this.isMinimizedByDefault()||this.isStuckMinimized||(this.timeoutAfterScrollStop=setTimeout(this.handleDefaultPosition.bind(this),4e3),this.adFormatContainer.adFormatState!==ci.MINIMIZED&&this.handleMinimizeHeaderAd()))}handleMinimizeHeaderAd(){this.adSlotElement.isSticky()&&this.adSlotElement.minimize(),this.scrollContentElement.removeWindowScrollListener(),this.adFormatContainer.minimize(!0).then((()=>{this.scrollContentElement.addWindowScrollListener(this.onScroll.bind(this)),this.minimize()}))}minimize(){this.mraidHelper.mraidSender.resize();const e=this.isStuckMinimized?ci.STUCK_MINIMIZED:ci.MINIMIZED;b.getInstance().fireOnPositionChangeCallback(this.adUnitConfig,e)}backToDefaultPosition(){clearTimeout(this.timeoutAfterScrollStop),this.isMinimizedByDefault()||this.isStuckMinimized||this.adFormatContainer.adFormatState===ci.MINIMIZED&&this.handleDefaultPosition()}handleDefaultPosition(){this.adFormatContainer.handleFromMinimizedDefaultAnimation().then(this.handleResizeToDefaultPosition.bind(this)),this.adSlotElement.optimize()}handleContentShift(){var e;super.handleContentShift(),this.isStuckMinimized&&(null===(e=this.contentShiftElement)||void 0===e||e.minimize())}isAdSlotBottomVisible(){return this.adSlotElement.isSticky()?this.scrollContentElement.currentScrollY<y:O.getElementBottomPosition(this.adSlotElement.adSlotNode,this.scrollContentElement.currentScrollY)>y}adSlotBecomesSticky(){this.adFormatContainer.setToAdSlotStyle(),this.adSlotElement.handleStickyAdSlot(),this.adFormatContainer.adFormatState===ci.MINIMIZED&&this.adSlotElement.minimize()}adSlotBecomesNonSticky(){const e=this.isAdSlotNotFullyVisible();e?this.adFormatContainer.setToFixedHeaderAdStyle():this.adFormatContainer.setToAdSlotStyle(),this.isStuckMinimized||(this.adSlotElement.optimize(),e||this.backToDefaultPosition())}hasForcedHeaderCustomBehaviourByCampaignIds(){return C.get("['133321', '133320', '133318', '134920', '134918', '134917', '137917', '137918', '137919']")&&C.get("['133321', '133320', '133318', '134920', '134918', '134917', '137917', '137918', '137919']").indexOf(this.bidderResponse.campaign_id)>=0}}class xi extends Fi{constructor(e){super(e),this.headerElement.setHeaderStyle()}initAdFormatContainer(){const e=super.initAdFormatContainer();return e.element.classList.add("--top"),e}initHeaderElement(){const e=super.initHeaderElement();return e.setBelowAd(),e}load(){super.load(),this.handleNonStickyHeader(),this.headerElement.setVisibility(!0)}onShowed(){this.headerElement.setVisibility(!0),super.onShowed()}onHidden(){this.headerElement.setVisibility(!1),super.onHidden()}onFormatReady(){super.onFormatReady(),this.headerElement.setVisibility(!0)}onPlay(){super.onPlay(),this.headerElement.foreground()}onPause(){super.onPause(),this.headerElement.background()}clearContainer(){this.headerElement.clear(),super.clearContainer()}destroy(){super.destroy(),this.headerElement.clear()}handleNonStickyHeader(){this.headerElement.handleNonStickyHeader(),this.updateContentShiftElementIfNeeded()}updateContentShiftElementIfNeeded(){this.contentShiftElement&&this.adSlotElement.isSticky()&&!ii.isStickyElement(this.headerElement.headerNode)&&ii.appendBeforeElement(this.adUnitConfig.params.header_selector,this.contentShiftElement.spaceContentDiv)}updateElementPositions(){this.handleNonStickyHeader()}handleDefaultPosition(){super.handleDefaultPosition(),this.headerElement.backToDefaultPosition()}getYIntersection(){return 0}isAdSlotNotFullyVisible(){return!0}handleMinimizeByDefault(){this.isMinimizedByDefault()&&(this.headerElement.minimize(),super.handleMinimizeByDefault())}handleMinimizeHeaderAd(){this.headerElement.minimize(),super.handleMinimizeHeaderAd()}}class Ui extends Fi{initAdFormatContainer(){return new bi(this.adUnitConfig.params,this.adUnitConfig.ad_unit_id,this.headerElement.headerHeight)}updateElementPositions(){this.updateAdContainerPosition(),this.adSlotElement.updateFixedElementStyle(this.getYIntersection())}}class ki extends Pi{addMediaTypeListener(){this.listeners.addVideoLoadListener()}onAdSlotPositionChanged(){var e;this.onScroll(),this.adSlotElement.handleStickyAdSlot(),this.handleContentShift(),this.adFormatContainer.adFormatState===ci.MINIMIZED&&(null===(e=this.contentShiftElement)||void 0===e||e.minimize())}onScroll(){this.updateAdContainerPosition(),this.adSlotElement.updateFixedElementStyle(this.getYIntersection());const e=this.isAdSlotNotFullyVisible();if(this.setAdFormatContainerStyle(e),e)return this.minimizeHeaderAd();this.backToDefaultPosition()}minimizeHeaderAd(){this.isMinimizedByDefault()||this.adFormatContainer.adFormatState===ci.MINIMIZED||this.handleMinimizeHeaderAd()}handleMinimizeHeaderAd(){var e;this.adSlotElement.minimize(),null===(e=this.contentShiftElement)||void 0===e||e.minimize(),this.adFormatContainer.minimize(!0).then((()=>{this.minimize()}))}backToDefaultPosition(){this.isMinimizedByDefault()||this.adFormatContainer.adFormatState!==ci.MINIMIZED||this.handleDefaultPosition()}handleDefaultPosition(){var e;this.adFormatContainer.handleFromMinimizedDefaultAnimation().then(this.handleResizeToDefaultPosition.bind(this)),this.adSlotElement.optimize(),null===(e=this.contentShiftElement)||void 0===e||e.backToDefaultPosition()}}class Mi extends ki{constructor(e){super(e),this.headerElement.setHeaderStyle()}initAdFormatContainer(){const e=super.initAdFormatContainer();return e.element.classList.add("--top"),e}initHeaderElement(){const e=super.initHeaderElement();return e.setBelowAd(),e}load(){super.load(),this.handleNonStickyHeader(),this.headerElement.setVisibility(!0)}onShowed(){this.headerElement.setVisibility(!0),super.onShowed()}onHidden(){this.headerElement.setVisibility(!1),super.onHidden()}onFormatReady(){super.onFormatReady(),this.headerElement.setVisibility(!0)}onPlay(){super.onPlay(),this.headerElement.foreground()}onPause(){super.onPause(),this.headerElement.background()}clearContainer(){this.headerElement.clear(),super.clearContainer()}destroy(){super.destroy(),this.headerElement.clear()}handleNonStickyHeader(){this.headerElement.handleNonStickyHeader(),this.updateContentShiftElementIfNeeded()}updateContentShiftElementIfNeeded(){this.contentShiftElement&&this.adSlotElement.isSticky()&&!ii.isStickyElement(this.headerElement.headerNode)&&ii.appendBeforeElement(this.adUnitConfig.params.header_selector,this.contentShiftElement.spaceContentDiv)}updateElementPositions(){this.handleNonStickyHeader()}handleDefaultPosition(){super.handleDefaultPosition(),this.headerElement.backToDefaultPosition()}getYIntersection(){return 0}isAdSlotNotFullyVisible(){return!0}handleMinimizeByDefault(){this.isMinimizedByDefault()&&(this.headerElement.minimize(),super.handleMinimizeByDefault())}handleMinimizeHeaderAd(){this.headerElement.minimize(),super.handleMinimizeHeaderAd()}}class Bi extends ki{initAdFormatContainer(){return new bi(this.adUnitConfig.params,this.adUnitConfig.ad_unit_id,this.headerElement.headerHeight)}updateElementPositions(){this.updateAdContainerPosition(),this.adSlotElement.updateFixedElementStyle(this.getYIntersection())}}class Hi{setBidderResponse(e){return this.bidderResponse=e,this}setAdUnitConfig(e){return this.adUnitConfig=this.setHeaderAdDefaultParams(this.bidderResponse,e),this}createScrollContentElement(){return this.scrollContentElement=new Ai(this.adUnitConfig.params.scroll_content_selector),this}createAdSlotElement(){return Ni.isAdSlotPresentAndValid(this.adUnitConfig.params,this.scrollContentElement.currentScrollY)||this.createDefaultAdSlot(),this.adSlotElement=new vi(this.adUnitConfig.params.ad_slot_selector),this}build(){this.domPosition=this.calculateDomPosition(),this.adUnitConfig.params.header_ad_dom_position=this.domPosition;const e=this.getHeaderAd();return e.scrollContentElement=this.scrollContentElement,e.adSlotElement=this.adSlotElement,e}calculateDomPosition(){return ii.isAboveDomHeader(this.adUnitConfig.params.ad_slot_selector,this.adUnitConfig.params.header_selector)?hi.ABOVE_HEADER:hi.BELOW_HEADER}getHeaderAd(){return this.domPosition===hi.ABOVE_HEADER&&this.bidderResponse.media_type===ei.IMAGE?new xi(this.adUnitConfig):this.domPosition===hi.ABOVE_HEADER?new Mi(this.adUnitConfig):this.bidderResponse.media_type===ei.IMAGE?new Ui(this.adUnitConfig):new Bi(this.adUnitConfig)}setHeaderAdDefaultParams(e,t){return t.params.header_stickiness||(t.params.header_stickiness=_i.AUTO),this.hasForcedHeaderCustomBehaviourV4ByCampaignIds(e)&&(t.params.minimized_by_default=!0),t}hasForcedHeaderCustomBehaviourV4ByCampaignIds(e){return C.get("['132468', '132467', '132466']")&&C.get("['132468', '132467', '132466']").indexOf(e.campaign_id)>=0}createDefaultAdSlot(){const e="ogy-header-ad-slot";this.adUnitConfig.params.ad_slot_selector=`#${e}`;const t=document.createElement("div");t.style.width="0px",t.style.height="0px",t.style.minHeight="0px",t.id=e,this.isAboveHeader()?ii.appendBeforeElement(this.adUnitConfig.params.header_selector,t):ii.appendAfterElement(this.adUnitConfig.params.header_selector,t)}isAboveHeader(){return this.adUnitConfig.params.header_ad_dom_position===hi.ABOVE_HEADER}}class Gi{createAdFormat(e,t){return e.ad_unit_type===Xn.HEADER_AD?this.buildHeaderAdFormat(e,t):e.ad_unit_type===Xn.FOOTER_AD?new Ti(t):new gi(t)}buildHeaderAdFormat(e,t){return(new Hi).setBidderResponse(e).setAdUnitConfig(t).createScrollContentElement().createAdSlotElement().build()}}class Wi{static setFirstPartyCookie(e){if(!e)return;const t=new Date;t.setTime(t.getTime()+31536e6);const n="expires="+t.toUTCString();document.cookie=Wi.COOKIE_NAME+"="+e+";"+n+";path=/"}static getFirstPartyCookie(e=Wi.COOKIE_NAME){const t=("; "+document.cookie).split("; "+e+"=");return 2==t.length?t.pop().split(";").shift():void 0}static getOgyConsentStoreCookie(){return this.getFirstPartyCookie(this.CONSENT_STORE_COOKIE_NAME)}static getUserIdFromCookie(){return this.getOgyConsentStoreCookie()||this.getFirstPartyCookie()||this.getFirstPartyCookie(this.COOKIE_IOS_OLD_NAME)}}Wi.COOKIE_NAME="OG_TAGJS",Wi.COOKIE_IOS_OLD_NAME="ogury-ssp",Wi.CONSENT_STORE_COOKIE_NAME="OG_CMSJS";var Vi=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class Yi{requestAds(e,t){R.info("Start Ad Request...");const n=t[0],i=this.getAdRequestData(e,n);i.body=this.forceCampaignIdIfNeeded(i.body,n);const s={url:C.get("https://mweb-tag.presage.io")+"/api/request-ad",method:"POST",httpData:i};return(new T).send(s,!0).then(this.onReceiveBidderResponses.bind(this))}getAdRequestData(e,t){const n=window.OG_CONTEXT.og_asset_key,i=Wi.getUserIdFromCookie(),s=[];return s.push({ad_unit_id:t.ad_unit_id,params:{max_width:t.params.max_width||180,max_height:t.params.max_height||180}}),{headers:Object.assign(Object.assign({"X-Asset-Key":n,"X-Request-ID":O.generateUUIDV4(),"X-Web-Sdk-Version":C.get("6.0.7")},e.tcString&&{"X-Consent":e.tcString}),i&&{User:i}),body:{context:{location:O.getWindow().location.href,advert_delivery_type:O.getDeliveryMode(),ad_session_id:window.OG_CONTEXT.og_ad_session_id},ad_requests:s}}}onReceiveBidderResponses(e){if(204===e.status)return;if(200!==e.status)throw new S(t.REQUEST_FAILED,o.AD_RESPONSE_ERROR,g.REQUEST_FAILED_DESCRIPTION,{status:e.status});const n=JSON.parse(e.responseText)[0];if(!n)throw new S(t.MALFORMED_AD_RESPONSE,o.AD_RESPONSE_ERROR,g.MALFORMED_AD_RESPONSE_DESCRIPTION);return n}forceCampaignIdIfNeeded(e,t){return Boolean(t.campaign_id)?(e.ad_requests[0].testcampaignid=t.campaign_id,e.ad_requests[0].testcreativeid=t.creative_id,e):e}}Vi([jn(o.AD_REQUEST_ERROR)],Yi.prototype,"requestAds",null);class ji{constructor(){this.onRuntimeError=this._onRuntimeError.bind(this)}fetch(e){return e?(this.path=`${C.get("https://custom-codes.prod.cloud.ogury.io")}/${e}.min.js`,new Promise(((e,t)=>{this.resolve=e,this.reject=t,this.addErrorEventListener(),this.dropScript()}))):Promise.resolve()}addErrorEventListener(){window.addEventListener("error",this.onRuntimeError)}removeErrorEventListener(){window.removeEventListener("error",this.onRuntimeError)}_onRuntimeError(e){e.filename===this.path&&(this.removeErrorEventListener(),this.reject(new S(t.RUNTIME_ERROR,o.REMOTE_CUSTOM_CODE_ERROR,g.RUNTIME_ERROR_DESCRIPTION)))}dropScript(){const e=document.createElement("script");e.type="text/javascript",e.crossOrigin="anonymous",e.src=this.path,e.onload=this.onScriptLoaded.bind(this),e.onerror=this.onRequestFailed.bind(this),e.onabort=this.onRequestFailed.bind(this),document.body.append(e)}onRequestFailed(){const e=new S(t.REQUEST_FAILED,o.REMOTE_CUSTOM_CODE_ERROR,g.REQUEST_FAILED_DESCRIPTION);this.reject(e),this.removeErrorEventListener()}onScriptLoaded(){this.resolve(),this.removeErrorEventListener()}}class zi{static isConcurentLoading(){return Boolean(O.getWindow()&&O.getWindow().is_instance_running)}}var $i,Ki=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class qi{constructor(){this.beforeUnloadHandler=this._beforeUnloadEvent.bind(this),this.pageHideHandler=this._pageHideEvent.bind(this),this.visibilityEventHandler=this._visibilityChangeEvent.bind(this),this.og_context={og_ad_status:Zn.AD_NOT_LOADED,og_instance_tag_number:1},window.OG_CONTEXT=this.og_context,O.getWindow().is_instance_running=O.getWindow().is_instance_running||!1,b.getInstance().addCleanContextCallback(this.cleanContext.bind(this))}initPlayer(e){this.ccid=e,(new ji).fetch(e).then(this.run.bind(this)).catch(this.onCustomCodeError.bind(this))}reportAndMonitorPageExit(){const e={passive:!0};window.addEventListener("beforeunload",this.beforeUnloadHandler,e),window.addEventListener("pagehide",this.pageHideHandler,e),document.addEventListener("visibilitychange",this.visibilityEventHandler,e)}cleanContext(){O.getWindow().is_instance_running=!1,window.removeEventListener("beforeunload",this.beforeUnloadHandler),window.removeEventListener("pagehide",this.pageHideHandler),document.removeEventListener("visibilitychange",this.visibilityEventHandler)}checkContextAndSetInitInstanceRunning(){if(zi.isConcurentLoading())throw new S(t.CONCURRENT_SCRIPT_LOADED_ERROR,o.CONTEXT_ERROR,g.CONCURRENT_SCRIPT_LOADED_DESCRIPTION);O.getWindow().is_instance_running=!0}onCustomCodeError(e){throw e}_beforeUnloadEvent(){L.postKeepAliveEvent(i.BEFORE_UNLOAD,{ad_status:this.og_context.og_ad_status})}_pageHideEvent(){const e=O.getTimeSpentOnPage();L.postKeepAliveEvent(i.PAGE_HIDE,{ad_status:this.og_context.og_ad_status,details:e&&O.serializeJSON(e)})}_visibilityChangeEvent(){if("visible"!==document.visibilityState){const e=O.getTimeSpentOnPage();L.postKeepAliveEvent(i.VISIBILITY_CHANGE_HIDDEN,{ad_status:this.og_context.og_ad_status,details:e&&O.serializeJSON(e)})}}}Ki([jn(o.REMOTE_CUSTOM_CODE_ERROR)],qi.prototype,"onCustomCodeError",null),function(e){e.BIDSWITCH="bsw",e.TTD="ttd",e.XANDR="xandr"}($i||($i={}));var Xi=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class Ji{initDSPAggregatorSync(e,n){const i={[$i.BIDSWITCH]:"/v1/init-sync/bid-switch",[$i.TTD]:"/ttd/init-sync",[$i.XANDR]:"/xandr/init-sync"},s=new Image;s.src=C.get("https://ms-cookie-sync.presage.io")+i[n]+"?iab_string="+e.tcString+"&source=tag"+(e.isOguryCmp?`&web_uid=${Wi.getOgyConsentStoreCookie()}`:""),s.onerror=e=>{R.warning("Img onerror fired",e),L.handleEvent(o.COOKIE_SYNCING_ERROR,{error_content:g.REQUEST_FAILED_DESCRIPTION,error_type:t.REQUEST_FAILED})},s.onabort=e=>{R.warning("Img onabort fired",e),L.handleEvent(o.COOKIE_SYNCING_ERROR,{error_content:g.REQUEST_ABORT_DESCRIPTION,error_type:t.REQUEST_ABORT})}}getGdprApplies(e){(new T).send({url:C.get("https://ms-cookie-sync.presage.io")+"/gdpr-applies",method:"GET"}).then((t=>{if(200!==t.status)return L.postKeepAliveEvent(i.GET_GDPR_APPLIES_FAILED),e(!0);const n=JSON.parse(t.responseText);L.postKeepAliveEvent(i.GET_GDPR_APPLIES_SUCCESS),e(n.gdprApplies)}))}}Xi([jn(o.COOKIE_SYNCING_ERROR)],Ji.prototype,"initDSPAggregatorSync",null),Xi([jn(o.GDPR_APPLIES_RESPONSE_ERROR)],Ji.prototype,"getGdprApplies",null);var Qi,Zi=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class es{postProfig(e,t){if(Wi.getFirstPartyCookie())return t();const n=Wi.getUserIdFromCookie(),i={headers:Object.assign({"X-Asset-Key":e,"X-Web-Sdk-Version":C.get("6.0.7")},n&&{User:n}),body:{device:{screen:{height:O.getClientHeight(),width:O.getClientWidth(),density:O.getWindow().devicePixelRatio}}}};(new T).send({url:C.get("https://pad-v3.presage.io")+"/v3/p-wm",method:"POST",httpData:i},!0).then(this.onReceiveProfigResponse.bind(this,t))}onReceiveProfigResponse(e,n){if(200!=n.status)throw new S(t.REQUEST_FAILED,o.PROFIG_RESPONSE_ERROR,g.REQUEST_FAILED_DESCRIPTION,{status:n.status});const s=JSON.parse(n.responseText);if(!s||!s.webUserId)throw new S(t.WEB_USER_ID_UNDEFINED,o.PROFIG_RESPONSE_ERROR,g.WEB_USER_ID_UNDEFINED_DESCRIPTION);Wi.setFirstPartyCookie(s.webUserId),L.postKeepAliveEvent(i.PROFIG_SUCCESS),e()}}Zi([jn(o.PROFIG_RESPONSE_ERROR)],es.prototype,"onReceiveProfigResponse",null);class ts{static addPrerenderLink(e){if(!e.landing_page_url)return;const t=document.createElement("link");t.href=e.landing_page_url,t.rel="prerender",O.getWindow().document.head.appendChild(t)}}!function(e){e.IMAGE="IMAGE",e.VIDEO="VIDEO"}(Qi||(Qi={}));class ns{static isValidResponse(e){return!!(e&&e.ad_content&&e.advert_id&&e.advertiser_id&&e.campaign_id&&e.user_id&&e.media_type&&e.ad_unit_type&&e.creative_id)}static validateSize(e){if(!(!isNaN(e.height)&&!isNaN(e.width)&&e.width>10&&e.height>10&&e.width<O.getClientWidth()&&e.height<O.getClientHeight()))throw new S(t.MALFORMED_FIELD_ERROR,o.AD_RESPONSE_ERROR,g.MALFORMED_AD_RESPONSE_SIZE_DESCRIPTION,{bidderResponseHeight:e.height,bidderResponseWidth:e.width,clientHeight:O.getClientHeight(),clientWidth:O.getClientWidth(),userAgent:navigator.userAgent})}}class is{static mergeAndGetLastAdUnit(e){return e.filter((t=>t.ad_unit_id===e[e.length-1].ad_unit_id&&t.asset_key===e[e.length-1].asset_key)).reduce(((e,t)=>{const n=e.passback||t.passback?Object.assign(Object.assign({},e.passback),t.passback):void 0;return Object.assign(Object.assign(Object.assign({},e),t),{params:Object.assign(Object.assign({},e.params),t.params),callbacks:Object.assign(Object.assign({},e.callbacks),t.callbacks),passback:n})}))}static unshiftAdUnitFromOGAdUnits(e){const t=O.getWindow().OG_ad_units?this.mapToArrayOfAdUnits(O.getWindow().OG_ad_units):[];return t.unshift(e),t}static mapToArrayOfAdUnits(e){return e.map((e=>this.mapToAdUnit(e)))}static mapToAdUnit(e){return Object.assign({params:{}},e)}}var ss=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class os extends qi{get adUnitConfig(){return this.adUnitConfigValue}set adUnitConfig(e){this.adUnitConfigValue=e,b.getInstance().setAdUnit(this.adUnitConfigValue)}constructor(){super(),this.bidderService=new Yi,this.cookieSyncService=new Ji,this.profigService=new es,this.adFormatFactory=new Gi,b.getInstance().addHandlePassbackCallback(this.handlePassback.bind(this)),this.og_context.delivery_mode=O.getDeliveryMode()}run(){if(this.adUnitConfig=this.getAdUnitConfig(),$n.checkIsBotUser(navigator),this.adSessionId=L.initAdSessionId(),zn.isAbortTagExecution(this.adUnitConfig))return;const e=O.getTimeSpentOnPage();L.postKeepAliveEvent(i.SCRIPT_LOADED,e?{details:O.serializeJSON(e)}:void 0),this.checkEnvironment(),Wn="mobile-web-tag-www",this.checkContextAndSetInitInstanceRunning(),super.reportAndMonitorPageExit(),this.initUserSyncProcess()}checkEnvironment(){if(!$n.isSupportedEnvironment(navigator))return R.warning("Environment is not valid due to a os, browser or browser version problem");L.postKeepAliveEvent(i.ENV_SUPPORTED)}getAdUnitConfig(){const e=O.getWindow().OG_ad_units;if(!e||0===e.length)return;const t=is.mergeAndGetLastAdUnit(is.mapToArrayOfAdUnits(e));return this.og_context.og_asset_key=t.asset_key,this.og_context.og_ad_unit=t.ad_unit_id,t}initUserSyncProcess(){if(!zn.isValidConfig(this.adUnitConfig))return R.warning("User sync process and Ad request will not be executed cause AdUnitConfig has not been found");this.isTestModeEnabled()?this.onGDPRAppliesResponse(!1):this.cookieSyncService.getGdprApplies(this.onGDPRAppliesResponse.bind(this))}onGDPRAppliesResponse(e){if(e)(new ni).run(this.onConsentResponse.bind(this));else{L.postKeepAliveEvent(i.CONSENT_NOT_APPLICABLE);const t=new Kn(!1,e);this.consentResponse=t,this.postProfig()}}onConsentResponse(e){this.consentResponse=e,this.postProfig()}initCookieSync(){$n.isThirdPartyEnabled(navigator)&&setTimeout((()=>{Object.values($i).forEach((e=>this.cookieSyncService.initDSPAggregatorSync(this.consentResponse,e)))}),C.get("3000"))}postProfig(){this.profigService.postProfig(this.adUnitConfig.asset_key,this.sendAdRequest.bind(this))}setPassbackAdUnitConfig(){this.adUnitConfig=Object.assign(Object.assign(Object.assign({},this.adUnitConfig),this.adUnitConfig.passback),{params:Object.assign(Object.assign({},this.adUnitConfig.params),this.adUnitConfig.passback.params),callbacks:Object.assign(Object.assign({},this.adUnitConfig.callbacks),this.adUnitConfig.passback.callbacks)}),delete this.adUnitConfig.passback}setPassbackContext(){window.OG_CONTEXT.og_ad_unit=this.adUnitConfig.ad_unit_id,O.getWindow().OG_ad_units[0]=this.adUnitConfig}handlePassback(){this.og_context.og_instance_tag_number=2,this.setPassbackAdUnitConfig(),this.setPassbackContext(),this.checkContextAndSetInitInstanceRunning();const e=O.getTimeSpentOnPage();if(L.postKeepAliveEvent(i.SCRIPT_LOADED,e?{details:O.serializeJSON(e)}:void 0),!zn.isValidConfig(this.adUnitConfig))return R.warning("Ad request will not be fired cause AdUnitConfig has not been found");this.sendAdRequest()}sendAdRequest(){this.bidderService.requestAds(this.consentResponse,[this.adUnitConfig]).then((e=>(null==e?void 0:e.ccid)&&e.ccid!==this.ccid?(new ji).fetch(e.ccid).then((()=>{if(this.adUnitConfig=this.getAdUnitConfig(),!zn.isAbortTagExecution(this.adUnitConfig))return e})):e)).then((e=>{e&&e.ad_unit_type===Xn.HEADER_AD&&Ni.checkPublisherHeader(this.adUnitConfig.params),ns.isValidResponse(e)?this.handleFillFromBidder(e):this.handleNoFillFromBidder(),this.initCookieSync()})).catch(this.onCatchAdResponseError.bind(this))}handleNoFillFromBidder(){L.postKeepAliveEvent(i.NO_FILL),b.getInstance().fireOnNoAdCallback(this.adUnitConfig),window.OG_CONTEXT.og_ad_status=Zn.AD_NO_FILL,R.warning("postAdRequests, no fill")}handleFillFromBidder(e){ns.validateSize(e),window.OG_CONTEXT.og_response_ad_unit_type=e.ad_unit_type,window.OG_CONTEXT.og_response_campaign_id=e.campaign_id,window.OG_CONTEXT.og_response_media_type=e.media_type,window.OG_CONTEXT.og_advert_id=e.advert_id,window.OG_CONTEXT.og_ad_status=Zn.AD_LOADED,L.postKeepAliveEvent(i.FILL),(new w).send(P(D.LOADED,e,this.adUnitConfig.ad_unit_id)),L.bidderResponse=e,this.initFormat(e),ts.addPrerenderLink(e)}onCatchAdResponseError(e){throw window.OG_CONTEXT.og_ad_status=Zn.AD_ERROR,this.initCookieSync(),e}initFormat(e){const t=this.adFormatFactory.createAdFormat(e,this.adUnitConfig);t.setBidderResponse(e),t.init()}isTestModeEnabled(){var e;const t=new URL(O.getWindow().location.href);if(!(null===(e=t.searchParams)||void 0===e?void 0:e.has("ogy_test_mode")))return!1;const n=t.searchParams.get("ogy_test_mode");return!!Object.keys(Qi).includes(n.toUpperCase())||(R.error(`unexpected value ${n} for ogy_test_mode. Supported values are ${Object.keys(Qi)}`),!1)}}os.USER_SYNC_PROCESS_DONE="USER_SYNC_PROCESS_DONE",ss([jn(o.UNKNOWN)],os.prototype,"run",null),ss([jn(o.PROFIG_REQUEST_ERROR)],os.prototype,"postProfig",null),ss([jn(o.PASSBACK_ERROR,!1)],os.prototype,"handlePassback",null),ss([jn(o.AD_RESPONSE_ERROR)],os.prototype,"handleFillFromBidder",null),ss([jn(o.AD_RESPONSE_ERROR)],os.prototype,"onCatchAdResponseError",null),ss([jn(o.RENDERING_ERROR)],os.prototype,"initFormat",null);var rs=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};class as{init(){var e;(new os).initPlayer(null===(e=document.currentScript)||void 0===e?void 0:e.dataset.ccid)}}rs([jn(o.UNKNOWN)],as.prototype,"init",null),(new as).init()})()})();